<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="lisp-tutorial.files/filelist.xml">
<link rel=Edit-Time-Data href="lisp-tutorial.files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>Использованные материалы:</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="place"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Денис</o:Author>
  <o:LastAuthor>denis</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>2138</o:TotalTime>
  <o:Created>2013-01-20T11:04:00Z</o:Created>
  <o:LastSaved>2013-01-20T11:04:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>9892</o:Words>
  <o:Characters>56391</o:Characters>
  <o:Lines>469</o:Lines>
  <o:Paragraphs>132</o:Paragraphs>
  <o:CharactersWithSpaces>66151</o:CharactersWithSpaces>
  <o:Version>11.9999</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:GrammarState>Clean</w:GrammarState>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:SelectEntireFieldWithStartOrEnd/>
   <w:UseWord2002TableStyleRules/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;
	mso-font-alt:"\FF2D\FF33 \660E\671D";
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:1 134676480 16 0 131072 0;}
@font-face
	{font-family:"\@MS Mincho";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:1 134676480 16 0 131072 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	text-indent:14.2pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:"Основной текст";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	mso-hyphenate:none;
	font-size:18.0pt;
	mso-bidi-font-size:16.0pt;
	font-family:Arial;
	letter-spacing:1.2pt;
	mso-fareast-language:ZH-CN;}
h2
	{mso-style-link:"Заголовок 2 Знак";
	mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	mso-hyphenate:none;
	font-size:16.0pt;
	mso-bidi-font-size:14.0pt;
	font-family:Arial;
	mso-fareast-language:ZH-CN;
	mso-bidi-font-style:italic;}
h3
	{mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	mso-hyphenate:none;
	font-size:13.0pt;
	font-family:Arial;
	mso-fareast-language:ZH-CN;}
h4
	{mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-indent:14.2pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:4;
	mso-hyphenate:none;
	font-size:14.0pt;
	font-family:"Times New Roman";
	mso-fareast-language:ZH-CN;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{mso-style-update:auto;
	mso-style-noshow:yes;
	mso-style-next:Обычный;
	margin:0cm;
	margin-bottom:.0001pt;
	text-indent:14.2pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{mso-style-update:auto;
	mso-style-noshow:yes;
	mso-style-next:Обычный;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:12.0pt;
	margin-bottom:.0001pt;
	text-indent:14.2pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{mso-style-update:auto;
	mso-style-noshow:yes;
	mso-style-next:Обычный;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:24.0pt;
	margin-bottom:.0001pt;
	text-indent:14.2pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-indent:14.2pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoBodyTextIndent, li.MsoBodyTextIndent, div.MsoBodyTextIndent
	{margin:0cm;
	margin-bottom:.0001pt;
	text-indent:18.0pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{margin:0cm;
	margin-bottom:.0001pt;
	text-indent:14.2pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";}
pre
	{margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";}
p.a, li.a, div.a
	{mso-style-name:код;
	margin:0cm;
	margin-bottom:.0001pt;
	text-indent:14.2pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-ansi-language:EN-US;}
span.2
	{mso-style-name:"Заголовок 2 Знак";
	mso-style-locked:yes;
	mso-style-link:"Заголовок 2";
	mso-ansi-font-size:16.0pt;
	mso-bidi-font-size:14.0pt;
	font-family:Arial;
	mso-ascii-font-family:Arial;
	mso-hansi-font-family:Arial;
	mso-bidi-font-family:Arial;
	mso-ansi-language:RU;
	mso-fareast-language:ZH-CN;
	mso-bidi-language:AR-SA;
	font-weight:bold;
	mso-bidi-font-style:italic;}
p.1, li.1, div.1
	{mso-style-name:"Заголовок1 зпт но не заголовок";
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:16.0pt;
	font-family:Arial;
	mso-fareast-font-family:"MS Mincho";
	mso-font-kerning:16.0pt;
	mso-ansi-language:EN-US;
	font-weight:bold;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:841.9pt 595.3pt;
	mso-page-orientation:landscape;
	margin:57.55pt 2.0cm 57.55pt 2.0cm;
	mso-header-margin:35.45pt;
	mso-footer-margin:35.45pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
@page Section2
	{size:841.9pt 595.3pt;
	mso-page-orientation:landscape;
	margin:57.55pt 2.0cm 57.55pt 2.0cm;
	mso-header-margin:35.45pt;
	mso-footer-margin:35.45pt;
	mso-paper-source:0;}
div.Section2
	{page:Section2;}
@page Section3
	{size:841.9pt 595.3pt;
	mso-page-orientation:landscape;
	margin:57.55pt 2.0cm 57.55pt 2.0cm;
	mso-header-margin:35.45pt;
	mso-footer-margin:35.45pt;
	mso-paper-source:0;}
div.Section3
	{page:Section3;}
 /* List Definitions */
 @list l0
	{mso-list-id:-132;
	mso-list-type:simple;
	mso-list-template-ids:-693831714;}
@list l0:level1
	{mso-level-tab-stop:74.6pt;
	mso-level-number-position:left;
	margin-left:74.6pt;
	text-indent:-18.0pt;}
@list l1
	{mso-list-id:-131;
	mso-list-type:simple;
	mso-list-template-ids:-1879825046;}
@list l1:level1
	{mso-level-tab-stop:60.45pt;
	mso-level-number-position:left;
	margin-left:60.45pt;
	text-indent:-18.0pt;}
@list l2
	{mso-list-id:-130;
	mso-list-type:simple;
	mso-list-template-ids:-1335058380;}
@list l2:level1
	{mso-level-tab-stop:46.3pt;
	mso-level-number-position:left;
	margin-left:46.3pt;
	text-indent:-18.0pt;}
@list l3
	{mso-list-id:-129;
	mso-list-type:simple;
	mso-list-template-ids:-1623529774;}
@list l3:level1
	{mso-level-tab-stop:32.15pt;
	mso-level-number-position:left;
	margin-left:32.15pt;
	text-indent:-18.0pt;}
@list l4
	{mso-list-id:-128;
	mso-list-type:simple;
	mso-list-template-ids:211475038;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:74.6pt;
	mso-level-number-position:left;
	margin-left:74.6pt;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l5
	{mso-list-id:-127;
	mso-list-type:simple;
	mso-list-template-ids:-291200080;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:60.45pt;
	mso-level-number-position:left;
	margin-left:60.45pt;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l6
	{mso-list-id:-126;
	mso-list-type:simple;
	mso-list-template-ids:-1432484482;}
@list l6:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:46.3pt;
	mso-level-number-position:left;
	margin-left:46.3pt;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l7
	{mso-list-id:-125;
	mso-list-type:simple;
	mso-list-template-ids:-310475014;}
@list l7:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:32.15pt;
	mso-level-number-position:left;
	margin-left:32.15pt;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l8
	{mso-list-id:-120;
	mso-list-type:simple;
	mso-list-template-ids:-583658930;}
@list l8:level1
	{mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l9
	{mso-list-id:-119;
	mso-list-type:simple;
	mso-list-template-ids:-258636;}
@list l9:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l10
	{mso-list-id:248933467;
	mso-list-type:hybrid;
	mso-list-template-ids:1429003626 -433042830 68747267 68747269 68747265 68747267 68747269 68747265 68747267 68747269;}
@list l10:level1
	{mso-level-start-at:0;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
@list l11
	{mso-list-id:1117021040;
	mso-list-type:hybrid;
	mso-list-template-ids:767583932 -1255649308 68747267 68747269 68747265 68747267 68747269 68747265 68747267 68747269;}
@list l11:level1
	{mso-level-start-at:0;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
@list l12
	{mso-list-id:1409841239;
	mso-list-type:hybrid;
	mso-list-template-ids:1713242622 -1902337690 68747267 68747269 68747265 68747267 68747269 68747265 68747267 68747269;}
@list l12:level1
	{mso-level-start-at:0;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
@list l13
	{mso-list-id:1625501349;
	mso-list-type:hybrid;
	mso-list-template-ids:270147972 -1879385064 68747267 68747269 68747265 68747267 68747269 68747265 68747267 68747269;}
@list l13:level1
	{mso-level-start-at:0;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Обычная таблица";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
table.MsoTableGrid
	{mso-style-name:"Сетка таблицы";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	border:solid windowtext 1.0pt;
	mso-border-alt:solid windowtext .5pt;
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-border-insideh:.5pt solid windowtext;
	mso-border-insidev:.5pt solid windowtext;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=RU link=blue vlink=purple style='tab-interval:35.4pt'>

<div class=Section1>

<p class=1><span style='mso-ansi-language:RU'>Введение в </span><span
lang=EN-US>Common</span><span lang=EN-US style='mso-ansi-language:RU'> </span><span
lang=EN-US>Lisp</span><span style='mso-ansi-language:RU'> для профессионалов </span><span
lang=EN-US>Delphi</span><span style='mso-ansi-language:RU'>/</span><span
lang=EN-US>SQL</span><span style='mso-ansi-language:RU'><o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-fareast-font-family:"MS Mincho"'>Цель
данного документа – дать направления поиска информации и указать эффективные
подходы к работе для профессиональных разработчиков, начинающих работу с </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>Common</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>Lisp</span><span
style='mso-fareast-font-family:"MS Mincho"'>. Рассмотрена версия </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>Lispworks</span><span
style='mso-fareast-font-family:"MS Mincho"'>, при этом не различаются
возможности стандарта и расширения </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>Lispworks</span><span style='mso-fareast-font-family:
"MS Mincho"'>. Мои расширения <span class=GramE>выделены</span> <span
style='color:blue'>синим цветом</span>. <span style='color:red'>Красным</span>
цветом выделены понятия, которые обязательно знать наизусть. Данный документ
написан в меру знаний и отражает личные предпочтения автора. <o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>

</div>

<b><span lang=EN-US style='font-size:16.0pt;font-family:Arial;mso-fareast-font-family:
"MS Mincho";mso-font-kerning:16.0pt;mso-ansi-language:EN-US;mso-fareast-language:
RU;mso-bidi-language:AR-SA'><br clear=all style='page-break-before:auto;
mso-break-type:section-break'>
</span></b>

<div class=Section2>

<p class=1><span lang=EN-US>Содержание</span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><!--[if supportFields]><span
style='mso-element:field-begin'></span><span
style='mso-spacerun:yes'> </span>TOC \o &quot;1-2&quot; \n \h \z \u <span
style='mso-element:field-separator'></span><![endif]--><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453783">Справочные
материалы и книги</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453784">Обозначения</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453785">Отличительные
особенности лиспа (по сравнению с Дельфи)</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453786">Сборка
мусора</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453787">Динамическая
разработка</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453788">Читатель/писатель</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453789">Макросы</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453790">Любимые
засады новичков</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453791">Отладчик
очень близко</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453792">Недопечатанные
формы</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453793">Стираем
подсказку и застреваем в строке ввода команды</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453794">Изучение
исходного текста в <span lang=EN-US style='mso-ansi-language:EN-US'>IDE</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453795">Списки.
Квазицитирование</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453796">Вид
списка на печати и в памяти</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453797">Работа
со списками в редакторе</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453798">Как
создать список. Квазицитирование</a></span></span><span style='mso-no-proof:
yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453799">Переменные
и присваивание</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453800"><span
style='mso-fareast-font-family:"MS Mincho"'>Оператор присваивания </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>setf</span><span
style='mso-fareast-font-family:"MS Mincho"'>, понятие места</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453801"><span
style='mso-fareast-font-family:"MS Mincho"'>Связывание и присваивание, </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>setf</span><span
style='mso-fareast-font-family:"MS Mincho"'>, понятие места</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453802"><span
style='mso-fareast-font-family:"MS Mincho"'>Локальные переменные</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453803"><span
style='mso-fareast-font-family:"MS Mincho"'>Глобальные (специальные) переменные</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453804"><span
style='mso-fareast-font-family:"MS Mincho"'>Замыкания</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453805">Переменные
и типы</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453806">Управляющие
конструкции</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453807">Определение
и вызов функции, возврат значений, <span lang=EN-US style='mso-ansi-language:
EN-US'>if</span>, циклы, локальные функции, указатели на функции, <span
lang=EN-US style='mso-ansi-language:EN-US'>try</span>..<span lang=EN-US
style='mso-ansi-language:EN-US'>except</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453808"><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>try</span><span
style='mso-fareast-font-family:"MS Mincho"'>..</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>finally</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453809"><span
lang=EN-US style='mso-ansi-language:EN-US'>Overload</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453810">Организация
проекта. Файлы, пакеты, <span lang=EN-US style='mso-ansi-language:EN-US'>eval</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>when</span>, #., <span lang=EN-US
style='mso-ansi-language:EN-US'>asdf</span>-системы, динамическая разработка</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453811">Определения
понятий</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453812">Таблица
аналогий</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453813">Динамическая
разработка, основные сценарии</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453814">Встроенные
типы данных</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453815">Символы</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453816">Списки</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453817">Массивы
и строки</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453818">Хеш-таблицы</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453819">Числа</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453820">Полиморфные
(родовые) функции, структуры и классы</a></span></span><span style='mso-no-proof:
yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453821">Родовые
функции</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453822">Структуры</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453823">Классы</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453824"><span
lang=EN-US style='mso-ansi-language:EN-US'>eval</span> и макросы</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453825"><span
lang=EN-US style='mso-ansi-language:EN-US'>Eval</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453826"><span
style='mso-fareast-font-family:"MS Mincho"'>Макросы</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453827">Отладка</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453828">Три
отладчика: консольный, жук и степпер</a></span></span><span style='mso-no-proof:
yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453829">Для
отладки поместите код в файл</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453830">Изучение
состояния программы в отладчике</a></span></span><span style='mso-no-proof:
yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453831">Листенер
во время отладки</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453832">Разновидности
ошибок и их локализация</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453833">Трассировка
и отладка <span lang=EN-US style='mso-ansi-language:EN-US'>print-</span>ами</a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453834">Остановы
и пошаговое исполнение</a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453835"><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>Assert</span><span
style='mso-fareast-font-family:"MS Mincho"'>, </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>with</span><span
style='mso-fareast-font-family:"MS Mincho"'>-</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>the</span><span
style='mso-fareast-font-family:"MS Mincho"'>1</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453836"><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>Unit</span><span
style='mso-fareast-font-family:"MS Mincho"'>-тестирование</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453837"><span
style='mso-fareast-font-family:"MS Mincho"'>Профайлер</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc2 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453838"><span
style='mso-fareast-font-family:"MS Mincho"'>Трассировка </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>SQL</span></a></span></span><span
style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc1 style='tab-stops:right dotted 728.0pt'><span
class=MsoHyperlink><span style='mso-no-proof:yes'><a href="#_Toc346453839"><span
style='mso-fareast-font-family:"MS Mincho"'>Контрольные вопросы и практические
задания</span></a></span></span><span style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoNormal><!--[if supportFields]><span style='mso-element:field-end'></span><![endif]--></p>

</div>

<span style='font-size:12.0pt;font-family:"Times New Roman";mso-fareast-font-family:
"Times New Roman";mso-ansi-language:RU;mso-fareast-language:RU;mso-bidi-language:
AR-SA'><br clear=all style='page-break-before:always;mso-break-type:section-break'>
</span>

<div class=Section3>

<h1><a name="_Toc346453783"></a><a name="_Toc346328119"><span style='mso-bookmark:
_Toc346453783'>Справочные материалы и книги</span></a></h1>

<p class=MsoPlainText><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'><a
href="http://www.cs.cmu.edu/Groups/AI/html/cltl/cltl2.html">Guy L. Steele Jr. _<b>Common
LISP: the Language</b>_. <span class=GramE>Digital<span style='mso-ansi-language:
RU'> </span>Press<span lang=RU style='mso-ansi-language:RU'>.</span></span><span
lang=RU style='mso-ansi-language:RU'> 1984.</span></a><o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'>Устаревший
стандарт </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>Common</span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho"'> </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>Lisp</span><span style='mso-fareast-font-family:"MS Mincho"'>,
но в удобочитаемой форме.<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText><b><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'><a
href="http://www.lispworks.com/documentation/lw50/CLHS/Front/">Common Lisp
Hyperspec<span style='font-weight:normal'> – </span><span lang=RU
style='mso-ansi-language:RU;font-weight:normal'>стандарт</span><span
style='font-weight:normal'> Common Lisp</span></a></span></b><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'> <o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'>Обычно
статьи из </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>Hyperspec</span><span style='mso-fareast-font-family:
"MS Mincho"'> доступны в </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>IDE</span><span style='mso-fareast-font-family:
"MS Mincho"'> по нажатию горячей клавиши на имени функции<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'><a
href="http://lisper.ru/pcl/">Книга «<b><span lang=EN-US style='mso-ansi-language:
EN-US'>Practical</span><span lang=EN-US> </span></b><b><span lang=EN-US
style='mso-ansi-language:EN-US'>Common</span><span lang=EN-US> </span></b><b><span
lang=EN-US style='mso-ansi-language:EN-US'>Lisp</span></b>» в Русском переводе</a>
<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'>Хорошее
практическое введение (более 400 страниц)<o:p></o:p></span></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText><b style='mso-bidi-font-weight:normal'><span
style='mso-fareast-font-family:"MS Mincho"'><a
href="http://cl-cookbook.sourceforge.net/index.html"><span lang=EN-US
style='mso-ansi-language:EN-US'>The Common Lisp Cookbook</span></a></span></b><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'><o:p></o:p></span></b></p>

<p class=MsoPlainText><span style='mso-fareast-font-family:"MS Mincho"'>Сборник</span><span
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>коротких</span><span
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>рецептов</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'><o:p></o:p></span></p>

<h1><a name="_Toc346453784"></a><a name="_Toc346328120"><span style='mso-bookmark:
_Toc346453784'>Обозначения</span></a><span style='mso-bookmark:_Toc346453784'></span><span
style='mso-bookmark:_Toc346328120'></span><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></h1>

<p class=MsoNormal>Красным цветом обозначены понятия, смысл которых нужно знать
наизусть. </p>

<h1><a name="_Toc346453785"></a><a name="_Toc346328121"><span style='mso-bookmark:
_Toc346453785'>Отличительные особенности лиспа (по сравнению с Дельфи)</span></a></h1>

<h2><a name="_Toc346453786"></a><a name="_Toc346328122"><span style='mso-bookmark:
_Toc346453786'>Сборка мусора</span></a></h2>

<p class=MsoBodyTextIndent>В лиспе реализована сборка мусора. Любой объект, на
который нет ссылок с других объектов, считается мусором (в т.ч. объект с
кольцевыми ссылками внутри себя). Периодически выполнение останавливается и
запускается сборка мусора, в ходе которой ненужные объекты уничтожаются и их
память освобождается. <span class=GramE>Возможны слабые ссылки, которые не
препятствуют уничтожению объекта, на который ссылаются (после сборки мусора эти
ссылки становятся пустыми), а также финализаторы (специальные функции, которые
вызываются над объектом, который вот-вот будет уничтожен сборщиком мусора).</span></p>

<h2><a name="_Toc346453787"></a><a name="_Toc346328123"><span style='mso-bookmark:
_Toc346453787'>Динамическая разработка</span></a></h2>

<p class=MsoNormal style='text-indent:18.0pt'>Динамическая разработка –
ключевое преимущество лиспа, которое очень помогает в разработке. Как правило,
Лисп позволяет менять программу без её перезапуска, в этом он подобен <span
lang=EN-US style='mso-ansi-language:EN-US'>SQL</span>. </p>

<p class=MsoNormal><span class=GramE><span lang=EN-US style='color:red;
mso-ansi-language:EN-US'>defclass</span></span><span lang=EN-US
style='mso-ansi-language:EN-US'> </span>работает<span style='mso-ansi-language:
EN-US'> </span>аналогично<span lang=EN-US style='mso-ansi-language:EN-US'>
CREATE TABLE/ALTER TABLE. </span>Он позволяет добавить поля в класс или удалить
их, с обновлением уже существующих экземпляров.</p>

<p class=MsoNormal><span class=GramE><span lang=EN-US style='color:red;
mso-ansi-language:EN-US'>defstruct</span></span><span lang=EN-US
style='color:red'> </span>переопределяет структуру, но при этом уже
существующие экземпляры становятся устарвешими (<span lang=EN-US
style='mso-ansi-language:EN-US'>obsolete</span>) и попытка обращения к ним
вызывает ошибку. </p>

<p class=MsoNormal><span class=GramE><span lang=EN-US style='color:red;
mso-ansi-language:EN-US'>defun</span></span><span lang=EN-US style='color:red;
mso-ansi-language:EN-US'>,</span><span lang=EN-US style='mso-ansi-language:
EN-US'> <span style='color:red'>defgeneric </span></span><span
style='color:red'>и</span><span lang=EN-US style='color:red;mso-ansi-language:
EN-US'> defmethod </span>работают<span style='mso-ansi-language:EN-US'> </span>аналогично<span
lang=EN-US style='mso-ansi-language:EN-US'> CREATE OR ALTER PROCEDURE, </span>причём<span
style='mso-ansi-language:EN-US'> </span>можно<span style='mso-ansi-language:
EN-US'> </span>менять<span style='mso-ansi-language:EN-US'> </span>набор<span
style='mso-ansi-language:EN-US'> </span>параметров<span lang=EN-US
style='mso-ansi-language:EN-US'>. </span>Если функция в данный момент
выполняется, будет продолжать выполняться старое тело. Независимо от этого, все
новые входы в данную функцию (в т.ч. рекурсивно из уже выполняющегося старого
тела) будут использовать новое тело. В отладчике в некоторых случаях можно
перезапустить уже выполняющуюся функцию, при этом будет вызвано новое тело с
теми же параметрами. </p>

<p class=MsoNormal style='text-indent:18.0pt'>Также можно динамически
создавать/менять пространства имён (<span style='color:red'>пакеты</span>) <span
lang=EN-US style='mso-ansi-language:EN-US'>defpackage</span>, уничтожать их (<span
lang=EN-US style='mso-ansi-language:EN-US'>delete</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>package</span>), включать и исключать
идентификатор (<span style='color:red'>символ</span>) <span class=GramE>в</span>/из
пространства имён. </p>

<p class=MsoNormal style='text-indent:18.0pt'>Возможности динамического
изменения программы могут быть ограничены при сборке с оптимизациями.</p>

<p class=MsoNormal style='text-indent:18.0pt'>Также в Лиспе есть <span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>listener</span>, который
по своим возможностям аналогичен <span class=GramE>интерактивному</span> <span
lang=EN-US style='mso-ansi-language:EN-US'>SQL</span>. <span lang=EN-US
style='color:red;mso-ansi-language:EN-US'>listener</span> позволяет немедленно
выполнять вычисления, не проходя цикл написания, сборки и запуска приложения. В
отладчике, <span lang=EN-US style='color:red;mso-ansi-language:EN-US'>listener</span><span
lang=EN-US style='color:red'> </span>позволяет работать со значениями локальных
переменных на разных уровнях стека. Это очень удобно для разработки,
тестирования и отладке программы – вместо запуска всей программы удобно
запускать её отдельные функции. </p>

<h2><a name="_Toc346453788"></a><a name="_Toc346328124"><span style='mso-bookmark:
_Toc346453788'>Читатель/писатель</span></a></h2>

<p class=MsoNormal style='text-indent:18.0pt'>Читатель (начинка функции <span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>read</span>) – это парсер.
Другие примеры парсеров – парсеры <span lang=EN-US style='mso-ansi-language:
EN-US'>XML</span>, <span lang=EN-US style='mso-ansi-language:EN-US'>JSON</span>,
<span lang=EN-US style='mso-ansi-language:EN-US'>dfm</span>. Также существует
парсер <span lang=EN-US style='mso-ansi-language:EN-US'>Object</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>Pascal</span>
в <span lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span>, <span
class=GramE>который</span> строит из текста дерево разбора. В <span lang=EN-US
style='mso-ansi-language:EN-US'>Delphi</span> это дерево недоступно для
пользователя, оно используется только внутри компилятора для генерации
машинного кода. В Лиспе дерево, получающееся в результате работы парсера,
доступно пользователю. В этом смысле читатель Лиспа больше похож на парсер <span
lang=EN-US style='mso-ansi-language:EN-US'>dfm</span>, <span lang=EN-US
style='mso-ansi-language:EN-US'>XML</span> или <span lang=EN-US
style='mso-ansi-language:EN-US'>JSON</span>, который разбирает данные, а не
код. Особенности работы читателя:</p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l13 level1 lfo14;
tab-stops:list 36.0pt'><![if !supportLists]><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>форматом ввода являются <span lang=EN-US
style='mso-ansi-language:EN-US'>S</span>-выражения (скобки, точки, атомы и
др.). Скобки и точки отвечают за группировку данных в деревья. Атомы являются
листьями деревьев.</p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l13 level1 lfo14;
tab-stops:list 36.0pt'><![if !supportLists]><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>идентификаторы программы являются атомами. При их
считывании они отражаются как специальные структуры данных типа <span
style='color:red'>символ</span>. Когда идентификатор встречается в программе
первый раз за время жизни программы, создаётся символ с таким именем. При
последующих чтениях того же идентификатора в дерево вставляется ссылка на уже
имеющийся символ. </p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l13 level1 lfo14;
tab-stops:list 36.0pt'><![if !supportLists]><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>также можно задать формат для ввода объектов произвольных
типов.</p>

<p class=MsoNormal style='text-indent:18.0pt'>Читатель может использоваться как
для ввода исходного текста программы, так и для ввода произвольных данных из
текстового формата. Разница – не в структуре этих данных, а в том, что с ними в
дальнейшем делается. Поэтому говорят, что в Лиспе код=данные, что также
обозначается словом <i><span lang=EN-US style='mso-ansi-language:EN-US'>homoiconicity</span></i>.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='text-indent:18.0pt'>Писатель – это начинка функции <span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>print</span>. <span
lang=EN-US style='mso-ansi-language:EN-US'>Print</span><span lang=EN-US> </span>печатает
в текстовый поток любой объект, причём можно настраивать печать своих и
некоторых встроенных типов. Можно считать функцию <span lang=EN-US
style='mso-ansi-language:EN-US'>print</span> расширяемым аналогом функции <span
lang=EN-US style='mso-ansi-language:EN-US'>write</span> из Дельфи. Строки,
числа, символы, списки, массивы, структуры, <span style='color:blue'>хеш-таблицы</span>
имеют формат вывода по умолчанию, при котором выводится содержимое этих
объектов. Для классов метод печати по умолчанию не печатает содержимое объекта.</p>

<p class=MsoNormal style='text-indent:18.0pt'>Читатель и писатель <span
class=GramE>согласованы</span>. Во многих случаях, если писатель что-то
написал, то читатель может прочитать написанное и построить &quot;такой
же&quot; объект, либо вернуть ссылку на тот же самый объект, который ранее был
напечатан. Те объекты, которые нельзя прочитать, по соглашению должны
печататься так: #&lt;какой-то текст&gt;. При попытке читателя прочитать это
представление возникает ошибка. Также писатель может отказаться печатать
слишком длинные или глубоко вложенные списки (это настраивается), тогда часть списка
будет заменена многоточием и при попытке его чтения также возникнет ошибка. </p>

<p class=MsoNormal style='text-indent:18.0pt'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='text-indent:18.0pt'>С помощью <span lang=EN-US
style='mso-ansi-language:EN-US'>print</span>/<span lang=EN-US style='mso-ansi-language:
EN-US'>read</span><span lang=EN-US> </span>возможен ввод-вывод данных с
циклическими ссылками.</p>

<p class=MsoNormal style='text-indent:18.0pt'>Отметим, что есть другой способ
сохранения данных с возможностью последующего восстановления - в
скомпилированных файлах. </p>

<h2><a name="_Toc346453789"></a><a name="_Toc346328125"><span style='mso-bookmark:
_Toc346453789'>Макросы</span></a></h2>

<p class=MsoNormal style='text-indent:18.0pt'>Макросы делают компилятор
расширяемым и позволяют создавать новые конструкции языка. </p>

<p class=MsoNormal style='text-indent:18.0pt'>Могущество макросов основано на
порядке сборке программы на лиспе. Программа собирается в порядке: запустили
программу, скомпилировали внутри этой программы модуль, прилинковали его (к уже
работающей программе), скомпилировали следующий и т.п. </p>

<p class=MsoNormal style='text-indent:18.0pt'>Макросы - механизм, позволяющий
строить код во время компиляции, используя для преобразования кода вызовы ранее
определённых функций. Например, на макросах можно сделать препроцессор <span
lang=EN-US style='mso-ansi-language:EN-US'>SQL</span>, который проверяет
правильность встроенного в программу запроса во время компиляции программы. </p>

<p class=MsoNormal style='text-indent:18.0pt'>Макросы часто <span class=GramE>представляют
из себя</span> шаблоны, в которых большая часть постоянна и лишь некоторая,
специально выделенная часть подставляется. Такие шаблоны похожи на списки, а
операция подстановки называется <span style='color:red'>квазицитирование. <o:p></o:p></span></p>

<h1><a name="_Toc346453790"></a><a name="_Toc346328126"><span style='mso-bookmark:
_Toc346453790'>Любимые засады новичков</span></a></h1>

<p class=MsoNormal>При работе в <span lang=EN-US style='color:red;mso-ansi-language:
EN-US'>listener</span> легко сбиться с толку. Чтобы это случалось не слишком
часто, нужно понимать следующие вещи:<span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></p>

<h2><a name="_Toc346453791"></a><a name="_Toc346328127"><span style='mso-bookmark:
_Toc346453791'>Отладчик очень близко</span></a></h2>

<p class=MsoNormal>Обычно подсказка <span lang=EN-US style='mso-ansi-language:
EN-US'>listener</span> выглядит как <span lang=EN-US style='mso-ansi-language:
EN-US'>CL</span>-<span lang=EN-US style='mso-ansi-language:EN-US'>USER</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>NN</span>
&gt; , где <span lang=EN-US style='mso-ansi-language:EN-US'>NN</span> –
возрастающий порядковый номер, который увеличивается на 1 после каждого ввода.
Попробуем ввести в <span lang=EN-US style='mso-ansi-language:EN-US'>listener</span>
выражение (/ 1 0). Мы увидим следующее:</p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>Error:
Division-by-zero caused by / of (1 0).</span></p>

<p class=MsoNormal>...</p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>CL-USER <span
class=GramE>NN :</span> 1 &gt; <o:p></o:p></span></p>

<p class=MsoNormal>Суффикс<span class=GramE> :</span> 1 говорит, что мы
находимся в отладчике. Об этом же говорит то, что на панели инструментов стала
доступна кнопка с изображением жука (бага). Нажав на неё, мы попадём в
графический отладчик, в нём увидим стек и т.д. Данное окно графического
отладчика будет связано с окном <span lang=EN-US style='mso-ansi-language:EN-US'>listener</span>,
хотя это не видно. </p>

<p class=MsoNormal>Подсказка отладчика мало чем отличается от обычной подсказки
листенера не только по виду, но и по возможностям: в ней также можно проводить
произвольные вычисления, как и в обычной подсказке. Это очень хорошо (в <span
lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span> так нельзя), но это
может сильно сбивать с толку.</p>

<p class=MsoNormal>Попробуем теперь снова ввести (/ 1 0) в окне <span
lang=EN-US style='mso-ansi-language:EN-US'>listener</span>. Подсказка
изменится:</p>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'>CL-USER <span
class=GramE>NN :</span> 2 &gt; <o:p></o:p></span></p>

<p class=MsoNormal>двойка говорит о том, что мы находимся в отладчике
рекурсивно, и уровень вложенности отладчиков равен двум. В окне графического
отладчика можно видеть, что функции / и <span lang=EN-US style='mso-ansi-language:
EN-US'>error</span> присутствуют в стеке дважды. </p>

<p class=MsoNormal>Теперь можно (в окне <span lang=EN-US style='mso-ansi-language:
EN-US'>listener</span>) набрать<span class=GramE> :</span><span lang=EN-US
style='mso-ansi-language:EN-US'>a</span> и &lt;<span lang=EN-US
style='mso-ansi-language:EN-US'>Enter</span>&gt; (или <span lang=EN-US
style='color:blue;mso-ansi-language:EN-US'>Ctrl</span><span style='color:blue'>-</span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>D</span>) - это примерно
то же, что бросить исключение <span lang=EN-US style='mso-ansi-language:EN-US'>EAbort</span>.
Выпадем обратно в первый уровень отладчика. Набрав<span class=GramE> :</span><span
lang=EN-US style='mso-ansi-language:EN-US'>a</span> &lt;<span lang=EN-US
style='mso-ansi-language:EN-US'>Enter</span>&gt; ещё раз, вернёмся в нормальное
состояние интерпретатора. Во время<span class=GramE> :</span><span lang=EN-US
style='mso-ansi-language:EN-US'>a</span> защитный код (аналог <span lang=EN-US
style='mso-ansi-language:EN-US'>finally</span>) выполняется, как и при обычном
выполнении программы. Поэтому, если мы &quot;упали&quot; в отладчик в каком-то
месте, выход из отладчика по<span class=GramE> :</span><span lang=EN-US
style='mso-ansi-language:EN-US'>a</span> является безопасным (хотя, конечно,
всё зависит от конкретной ошибки и ситуации).</p>

<p class=MsoNormal>Данный отладчик, хоть и не даёт возможности пошагового
исполнения (эта возможность предоставляется отдельным средством – степпером),
обладает другими очень полезными возможностями, во многом мы терпим лисп ради
них. Помимо возможности вычисления произвольных выражений в контексте
программы, отладчик обычно предлагает один или несколько
&quot;перезапусков&quot; (<span lang=EN-US style='mso-ansi-language:EN-US'>restarts</span>),
например, попробовать вычисление ещё раз, вернуть другое значение <span
class=GramE>вместо</span> вызвавшего ошибку и т.п. Рестарты нужно читать и
использовать. </p>

<p class=MsoNormal>Для более серьёзной отладки используется графический
отладчик (жук), который можно вызвать из консольного с помощью иконки н панели
управления. О нём <span class=GramE>см</span>. ниже.</p>

<h2><a name="_Toc346453792"></a><a name="_Toc346328128"><span style='mso-bookmark:
_Toc346453792'>Недопечатанные формы</span></a></h2>

<p class=MsoNormal>В листенере можно вводить многострочные команды. Команда
считается завершённой, когда вы ввели полную форму, в которой все скобки,
кавычки и т.п. закрыты, и после этого нажали <span lang=EN-US style='mso-ansi-language:
EN-US'>Enter</span>. </p>

<p class=MsoNormal>Строковый литерал (строка в кавычках) также может быть многострочной.
Как понять, находится ли листенер в состоянии чтения команды или вычисления? После
запуска команды на выполнение её текст окрашивается в красный цвет. Если есть
сомнения, всегда можно нажать <span lang=EN-US style='mso-ansi-language:EN-US'>Ctrl</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>Break</span><span lang=EN-US> </span>(или
на вот такой кирпич <!--[if gte vml 1]><v:shapetype id="_x0000_t75"
 coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe"
 filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:32.25pt;
 height:42.75pt'>
 <v:imagedata src="lisp-tutorial.files/image001.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img border=0 width=43 height=57
src="lisp-tutorial.files/image002.jpg" v:shapes="_x0000_i1025"><![endif]>) и
посмотреть на стек. Также есть диспетчер процессов, <span lang=EN-US
style='mso-ansi-language:EN-US'>works</span>/<span lang=EN-US style='mso-ansi-language:
EN-US'>tools</span>/<span lang=EN-US style='mso-ansi-language:EN-US'>process</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>browser</span>,
но не забудьте после открытия нажать <span lang=EN-US style='mso-ansi-language:
EN-US'>F</span>5 для обновления состояния. </p>

<p class=MsoNormal>Другие сведения о локализации ошибок <span class=GramE>см</span>.
в разделе об отладке. </p>

<h2><a name="_Toc346453793"></a><a name="_Toc346328129"><span style='mso-bookmark:
_Toc346453793'>Стираем подсказку и застреваем в строке </span></a><span
style='mso-bookmark:_Toc346453793'>ввода команды</span></h2>

<p class=MsoNormal><span style='mso-fareast-language:ZH-CN'>Можно спокойно
стереть подсказку &quot;&gt;&quot; листенера и тогда будет вообще непонятно,
завис ли </span><span lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>Listener</span><span lang=EN-US style='mso-fareast-language:ZH-CN'> </span><span
style='mso-fareast-language:ZH-CN'>и что с ним случилось. Вы будете писать
какие-то команды, нажимать </span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>Enter</span><span lang=EN-US
style='mso-fareast-language:ZH-CN'> </span><span style='mso-fareast-language:
ZH-CN'>и ничего не будет происходить. В случае любых недоразумений жмите </span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>Ctrl</span><span
style='mso-fareast-language:ZH-CN'>-</span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>Break</span><span lang=EN-US
style='mso-fareast-language:ZH-CN'> </span><span style='mso-fareast-language:
ZH-CN'>и затем<span class=GramE> :</span></span><span lang=EN-US
style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>a</span><span
style='mso-fareast-language:ZH-CN'>. Это, как правило, помогает.<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-fareast-language:ZH-CN'>При определённых
условиях (вводе разного рода команд) курсор может &quot;застрять&quot; в
строчке ввода команды, располагающейся внизу экрана (она называетя </span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>minibuffer</span><span
style='mso-fareast-language:ZH-CN'>). Если Вы не знаете, зачем туда попали, жмите
</span><span lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>ESC</span><span style='mso-fareast-language:ZH-CN'>, пока не отпустит, а
затем нажмите стрелку вниз, чтобы сбросить набранные в отчаянии лишние нажатия </span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>ESC</span><span
style='mso-fareast-language:ZH-CN'>.<o:p></o:p></span></p>

<h1><a name="_Toc346328130"></a><a name="_Toc346453794"></a><a
name="_Toc346328142"><span style='mso-bookmark:_Toc346453794'><span
style='mso-bookmark:_Toc346328130'>Изучение исходного текста</span></span></a><span
style='mso-bookmark:_Toc346453794'><span style='mso-bookmark:_Toc346328130'> в </span></span><span
style='mso-bookmark:_Toc346453794'><span style='mso-bookmark:_Toc346328130'><span
lang=EN-US style='mso-ansi-language:EN-US'>IDE</span></span></span><span
style='mso-bookmark:_Toc346328130'></span></h1>

<p class=MsoNormal><span style='mso-bookmark:_Toc346328130'>В загруженной
программе, </span><span style='mso-bookmark:_Toc346328130'><span lang=EN-US
style='mso-ansi-language:EN-US'>Alt</span>-. показывает определение переменной,
ф-ии, класса, родовой ф-ии, макроса и многих других объектов. </span><span
style='mso-bookmark:_Toc346328130'><span class=GramE><span lang=EN-US
style='mso-ansi-language:EN-US'>Works</span>/<span lang=EN-US style='mso-ansi-language:
EN-US'>Tools</span>/<span lang=EN-US style='mso-ansi-language:EN-US'>System</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>browser</span><span
lang=EN-US> </span>показывает системы (в т.ч. <span lang=EN-US
style='mso-ansi-language:EN-US'>asdf</span>).</span> </span><span
style='mso-bookmark:_Toc346328130'><span class=GramE><span lang=EN-US
style='mso-ansi-language:EN-US'>Works</span>/<span lang=EN-US style='mso-ansi-language:
EN-US'>Tools</span>/<span lang=EN-US style='mso-ansi-language:EN-US'>Symbol</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>browser</span><span
lang=EN-US> </span>позволяет искать символы по части названия (то же делает и <span
lang=EN-US style='mso-ansi-language:EN-US'>apropos</span>).</span> </span></p>

<h1><span style='mso-bookmark:_Toc346328130'><a name="_Toc346453795">Списки.
Квазицитирование</a></span></h1>

<h2><a name="_Toc346453796"></a><a name="_Toc346328131"><span style='mso-bookmark:
_Toc346453796'>Вид списка на печати и в памяти</span></a></h2>

<p class=MsoBodyTextIndent>Список выглядит в тексте так:</p>

<p class=a><span style='mso-ansi-language:RU'>( элемент1 элемент2 ... элемент</span><span
lang=EN-US>N</span><span class=GramE><span style='mso-ansi-language:RU'> )</span></span><span
style='mso-ansi-language:RU'><o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span class=GramE>Внутри список (1 2 3 4)
представляет из себя кособокое дерево объектов типа <span lang=EN-US
style='mso-ansi-language:EN-US'>cons</span>: (картинка отсюда <a
href="http://eli.thegreenplace.net/2007/08/10/sicp-section-221/">http://eli.thegreenplace.net/2007/08/10/sicp-section-221/</a></span></p>

<p class=MsoBodyTextIndent><!--[if gte vml 1]><v:shape id="_x0000_i1026"
 type="#_x0000_t75" style='width:162.75pt;height:66pt'>
 <v:imagedata src="lisp-tutorial.files/image003.png" o:title="before_cons"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=217 height=88
src="lisp-tutorial.files/image004.jpg" v:shapes="_x0000_i1026"><![endif]></p>

<p class=MsoBodyTextIndent>Т.е, наиболее быстрые операции над списком – это
операции над его первым элементом, а доступ к произвольному элементу имеет
сложность <span lang=EN-US style='mso-ansi-language:EN-US'>O</span>(<span
lang=EN-US style='mso-ansi-language:EN-US'>length</span>(<span lang=EN-US
style='mso-ansi-language:EN-US'>x</span>)) Разные списки могут иметь общий
хвост.</p>

<h2><a name="_Toc346453797"></a><a name="_Toc346328132"><span style='mso-bookmark:
_Toc346453797'>Работа со списками в редакторе</span></a></h2>

<p class=MsoBodyTextIndent>Исходный текст по большей части <span class=GramE>представляет
из себя</span> печатную форму списков (и преобразуется в списки на этапе чтения
программы из файла исходника), поэтому очень важно уметь работать с ними в
редакторе. Над списками доступны команды: </p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l13 level1 lfo14;
tab-stops:list 36.0pt'><![if !supportLists]><span style='color:red'><span
style='mso-list:Ignore'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='color:red'>переход <span
class=GramE>от</span> закрывающей к открывающей скобке и обратно<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l13 level1 lfo14;
tab-stops:list 36.0pt'><![if !supportLists]><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='color:red'>удаление списка до или после
курсора в буфер обмена</span> (<span lang=EN-US style='mso-ansi-language:EN-US'>kill</span>)</p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l13 level1 lfo14;
tab-stops:list 36.0pt'><![if !supportLists]><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='color:red'>переход на следующий/предыдущий
список</span> и на список верхнего уровня</p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-18.0pt;mso-list:l13 level1 lfo14;
tab-stops:list 36.0pt'><![if !supportLists]><span style='mso-list:Ignore'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>перестановка двух списков перед курсором</p>

<p class=MsoNormal style='text-indent:18.0pt'>Для изучения этих команд можно
открыть любой файл с исходным текстом в редакторе.<span
style='mso-spacerun:yes'>   </span></p>

<p class=MsoNormal style='text-indent:18.0pt'>Также можно отметить, что
редактор подсвечивает парную скобку и раскрашивает скобки в разные цвета. <span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt'>Поскольку синтаксис лиспа
неудобный, при работе важную роль играют отступы. <span class=GramE><span
lang=EN-US style='mso-ansi-language:EN-US'>IDE</span> автоматически выставляет
отступы, для этого после нажатия <span lang=EN-US style='mso-ansi-language:
EN-US'>Enter</span> при начале новой строки нужно также нажимать <span
lang=EN-US style='mso-ansi-language:EN-US'>Tab</span>. Также есть команда <span
lang=EN-US style='mso-ansi-language:EN-US'>Alt</span>-.</span> <span
class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>indent</span></span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>form</span>,
которая выравнивает целое определение (нужно стоять в начале определения). </p>

<h2><a name="_Toc346453798"></a><a name="_Toc346328133"><span style='mso-bookmark:
_Toc346453798'>Как создать список</span></a><span style='mso-bookmark:_Toc346453798'>.
Квазицитирование</span></h2>

<p class=MsoNormal style='text-indent:18.0pt'>Чтобы создать новый список в <span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>listener</span>-е, можно
написать:</p>

<p class=a><span lang=EN-US>&gt; '(a &quot;b&quot; a 123)</span></p>

<p class=a><span lang=EN-US>(<span class=GramE>a</span> &quot;b&quot; a 123) ;
это напечатает листенер</span></p>

<p class=MsoNormal style='text-indent:18.0pt'>Здесь мы построили <span
style='color:red'>список</span> из четырёх элементов. Первый и третий элементы
идентичны – это символ с именем &quot;A&quot;. Второй элемент – строка &quot;<span
lang=EN-US style='mso-ansi-language:EN-US'>b</span>&quot;, четвёртый – число
123. Лисп печатает результат нашей работы. Мы использовали одиночную кавычку -
&quot;цитирование&quot;, чтобы листенер не воспринял нашу команду как вызов
функции <span lang=EN-US style='mso-ansi-language:EN-US'>a</span>. Через
некоторое время наш список может стать мусором, т.к. мы его ничему не
присвоили, а символ с именем &quot;А&quot; останется, т.к. при чтении он
автоматически попал в текущее пространство имён.</p>

<p class=MsoNormal style='text-indent:18.0pt'>Двухуровневый список можно
построить так:</p>

<p class=a><span lang=EN-US>&gt; '(a (a)) </span></p>

<p class=MsoNormal style='text-indent:18.0pt'>Он будет содержать две ссылки на
тот же самый символ с именем &quot;<span lang=EN-US style='mso-ansi-language:
EN-US'>A</span>&quot;.</p>

<p class=MsoNormal style='text-indent:18.0pt'>Здесь второй элемент списка –
список из одного элемента (символа с именем &quot;<span lang=EN-US
style='mso-ansi-language:EN-US'>A</span>&quot;). </p>

<p class=MsoNormal style='text-indent:18.0pt'>Другой способ построения такого
же списка:</p>

<p class=a><span lang=EN-US>&gt; (list 'a &quot;b&quot; 'a (+ 120 3))</span></p>

<p class=MsoNormal style='text-indent:18.0pt'>Здесь для построения используется
функция <span lang=EN-US style='mso-ansi-language:EN-US'>list</span>. Эта
функция вычисляет все свои аргументы и составляет из них свежий список.
Последний аргумент – это вычисление выражения 120+3=123. </p>

<p class=MsoNormal style='text-indent:18.0pt'>Третий способ:</p>

<p class=a><span style='mso-ansi-language:RU'>&gt; `(</span><span lang=EN-US>a</span><span
style='mso-ansi-language:RU'> &quot;</span><span lang=EN-US>b</span><span
style='mso-ansi-language:RU'>&quot; </span><span lang=EN-US>a</span><span
style='mso-ansi-language:RU'> ,<b>(+ 120 3)</b>) <o:p></o:p></span></p>

<p class=MsoBodyTextIndent>Здесь применено квазицитирование. Апостроф означает,
что следующее за ним лисп-выражение – это шаблон. Данные в шаблоне не
вычисляются. Но если в шаблоне встречается запятая или &quot;,@&quot;<span
class=GramE> ,</span> то следующее выражение – подставляемое, оно вычисляется.
Данная конструкция чем-то аналогична функциям форматного вывода и её можно <span
class=GramE>смоделировать</span> в Дельфи так:</p>

<p class=MsoNormal style='text-indent:18.0pt'><span class=GramE><span
lang=EN-US style='mso-ansi-language:EN-US'>format(</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'>'(a,''b'',a,%d)',[120+3])<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt'>Отличие состоит в том, что в
Дельфи эта конструкция работает со строками, а в Лиспе – с деревьями. </p>

<p class=MsoNormal style='text-indent:18.0pt'>Шаблоны и обычные цитаты могут
быть вложенными и могут быть вложены друг в друга.</p>

<h1><a name="_Toc346453799"></a><a name="_Toc346328134"><span style='mso-bookmark:
_Toc346453799'>Переменные</span></a><span style='mso-bookmark:_Toc346453799'> и
присваивание</span></h1>

<h2><a name="_Toc346453800"></a><a name="_Toc346328135"><span style='mso-bookmark:
_Toc346453800'><span style='mso-fareast-font-family:"MS Mincho"'>Оператор
присваивания </span></span></a><span style='mso-bookmark:_Toc346328135'><span
style='mso-bookmark:_Toc346453800'><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>setf</span></span></span><span
style='mso-bookmark:_Toc346328135'><span style='mso-bookmark:_Toc346453800'><span
style='mso-fareast-font-family:"MS Mincho"'>, понятие места</span></span></span><span
style='mso-fareast-font-family:"MS Mincho"'><o:p></o:p></span></h2>

<p class=MsoNormal><span class=GramE><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";color:red;mso-ansi-language:EN-US'>setf</span></span><span
style='mso-fareast-font-family:"MS Mincho"'> – это присваивание, оно вполне
аналогично := в </span><st1:place w:st="on"><span lang=EN-US style='mso-fareast-font-family:
 "MS Mincho";mso-ansi-language:EN-US'>Delphi</span></st1:place><span
style='mso-fareast-font-family:"MS Mincho"'>. </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'><o:p></o:p></span></p>

<h2><a name="_Toc346328136"></a><a name="_Toc346453801"><span style='mso-bookmark:
_Toc346328136'><span style='mso-fareast-font-family:"MS Mincho"'>Связывание и
присваивание, </span></span></a><span style='mso-bookmark:_Toc346453801'><span
style='mso-bookmark:_Toc346328136'><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>setf</span></span></span><span
style='mso-bookmark:_Toc346453801'><span style='mso-bookmark:_Toc346328136'><span
style='mso-fareast-font-family:"MS Mincho"'>, понятие места</span></span></span><span
style='mso-bookmark:_Toc346328136'><span style='mso-fareast-font-family:"MS Mincho"'><o:p></o:p></span></span></h2>

<p class=MsoNormal><span style='mso-bookmark:_Toc346328136'><span
style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:ZH-CN'>Связывание
- это одновременное объявление и инициализация переменной. <o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc346328136'><span
style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:ZH-CN'>Присваивание
- то же самое, что<span class=GramE> :</span>= в </span></span><span
style='mso-bookmark:_Toc346328136'><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>Delphi</span></span><span
style='mso-bookmark:_Toc346328136'><span style='mso-fareast-font-family:"MS Mincho";
mso-fareast-language:ZH-CN'>. </span></span><span style='mso-bookmark:_Toc346328136'><span
style='mso-fareast-font-family:"MS Mincho"'>То, чему можно присваивать,
называется <span style='color:red'>место</span> (</span></span><span
style='mso-bookmark:_Toc346328136'><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";color:red;mso-ansi-language:EN-US'>place</span></span><span
style='mso-bookmark:_Toc346328136'><span style='mso-fareast-font-family:"MS Mincho"'>).
В частности, местами являются имена переменных, элементы списков и массивов,
подстроки строк, значения хеш-таблиц, соответствующие определённому ключу и
т.п. Можно определить новые виды мест. Общий вид присваивания: <o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc346328136'><span
style='font-family:"Courier New"'>(</span></span><span style='mso-bookmark:
_Toc346328136'><span lang=EN-US style='font-family:"Courier New";color:red;
mso-ansi-language:EN-US'>setf</span></span><span style='mso-bookmark:_Toc346328136'><span
style='font-family:"Courier New"'> место<span class=GramE>1</span> значение1
... место</span></span><span style='mso-bookmark:_Toc346328136'><span
lang=EN-US style='font-family:"Courier New";mso-ansi-language:EN-US'>N</span></span><span
style='mso-bookmark:_Toc346328136'><span style='font-family:"Courier New"'>
значение</span></span><span style='mso-bookmark:_Toc346328136'><span
lang=EN-US style='font-family:"Courier New";mso-ansi-language:EN-US'>N</span></span><span
style='mso-bookmark:_Toc346328136'><span style='font-family:"Courier New"'>)</span></span><span
style='mso-bookmark:_Toc346328136'><span style='mso-fareast-font-family:"MS Mincho"'><o:p></o:p></span></span></p>

<h2><span style='mso-bookmark:_Toc346328136'><a name="_Toc346453802"><span
style='mso-fareast-font-family:"MS Mincho"'>Локальные переменные</span></a></span><span
style='mso-fareast-font-family:"MS Mincho"'><o:p></o:p></span></h2>

<p class=MsoNormal style='text-indent:18.0pt'><span style='mso-fareast-font-family:
"MS Mincho"'>Локальные переменные полностью аналогичны локальным переменным </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>Delphi</span><span
style='mso-fareast-font-family:"MS Mincho"'>, но есть следующие отличия:<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span style='mso-fareast-font-family:
"MS Mincho"'>В Дельфи переменные определяются до слова </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>begin</span><span
style='mso-fareast-font-family:"MS Mincho"'> с помощью слова </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>var</span><span
style='mso-fareast-font-family:"MS Mincho"'>, в Лиспе они определяются внутри
тела функции с помощью разнообразных конструкций (</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>let</span><span
style='mso-fareast-font-family:"MS Mincho"'>, </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>destructuring</span><span
style='mso-fareast-font-family:"MS Mincho"'>-</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>bind</span><span
style='mso-fareast-font-family:"MS Mincho"'>, </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>multiple</span><span
style='mso-fareast-font-family:"MS Mincho"'>-</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>value</span><span
style='mso-fareast-font-family:"MS Mincho"'>-</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>bind</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
style='mso-fareast-font-family:"MS Mincho";color:blue'>(</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";color:blue;mso-ansi-language:
EN-US'>mlvl</span><span style='mso-fareast-font-family:"MS Mincho";color:blue'>-</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";color:blue;mso-ansi-language:
EN-US'>bind</span><span style='mso-fareast-font-family:"MS Mincho";color:blue'>)</span><span
style='mso-fareast-font-family:"MS Mincho"'>, </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>with</span><span
style='mso-fareast-font-family:"MS Mincho"'>-</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>open</span><span
style='mso-fareast-font-family:"MS Mincho"'>-</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>file</span><span
style='mso-fareast-font-family:"MS Mincho"'> и т.п.) и их область действия – до
закрывающей скобки этой конструкции. Возможно несколько одноимённых переменных
внутри одной функции на разных уровнях вложенности - внутренние затеняют
внешние. <o:p></o:p></span></p>

<h2><a name="_Toc346453803"></a><a name="_Toc346328137"><span style='mso-bookmark:
_Toc346453803'><span style='mso-fareast-font-family:"MS Mincho"'>Глобальные
(специальные) переменные</span></span></a><span style='mso-fareast-font-family:
"MS Mincho"'><o:p></o:p></span></h2>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>В
Лиспе глобальные переменные очень полезны и они интенсивно применяются,
например, для сбора данных при рекурсивном обходе какого-либо дерева или для
хранения разного рода режимов работы.<o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>Основная
особенность работы с глобальными переменными: когда такой переменной делается </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>let</span><span
style='mso-fareast-font-family:"MS Mincho"'>, локальная переменная с таким
именем НЕ создаётся<span class=GramE>.</span> Вместо этого, происходит
связывание глобальной переменной. Именно, старое значение глобальной переменной
запоминается и временно <span class=GramE>заменяется на новое</span>. Теперь,
во всех функциях, будет видно значение, заданное </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>let</span><span
style='mso-fareast-font-family:"MS Mincho"'>. <span class=GramE>Последующие</span>
</span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:
EN-US'>setf</span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'>
</span><span style='mso-fareast-font-family:"MS Mincho"'>могут его менять. После
выхода из области действия </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>let</span><span style='mso-fareast-font-family:
"MS Mincho"'>, ранее запомненное в момент выполнения </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>let</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>значение восстанавливается. Пример
работы в однопоточном приложении:<o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid windowtext;
 mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'>(defparameter *glob* </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>1</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>)<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'> </span><o:p></o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>(</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:red'>progn</span><span class=GramE><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:red;mso-ansi-language:RU'> </span><span style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";
  mso-ansi-language:RU'>;</span></span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'> составной оператор, то же, что </span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>begin</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>..</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>end</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>;<span style='color:red'> </span><o:p></o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>   </span></span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(let
  ((*glob* 2))<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'>     
  </span>(format t &quot;связана в ~S&quot; *glob*)<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'>     
  </span>(setf *glob* 3)<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'>     
  </span>(format t &quot;после setf ~S&quot; *glob*)<o:p></o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>   </span>)<o:p></o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>   </span>(</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>format</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'> </span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>t</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'> &quot;после выхода из </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>let</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> ~</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>S</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>&quot; *</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>glob</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>*)<o:p></o:p></span></p>
  <p class=a><span style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'>)<o:p></o:p></span></p>
  <p class=a><span style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'>var</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'> </span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>glob</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>:</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>integer</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>=1; <o:p></o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'>var saveGlob:integer;<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'>begin<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'>try </span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'><o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'> 
  </span>saveGlob:=glob; glob:=2;<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'> 
  </span>writeln(format('</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>связана</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>в</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> %d',[glob]));<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'> 
  </span>glob:=3;<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'> 
  </span>writeln(format('</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>после</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> := %d',[glob]));<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'>finally<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'> 
  </span>glob:=saveGlob;<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'> 
  </span>end;<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'>writeln</span><span style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";
  mso-ansi-language:RU'>(</span><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>format</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>('после выхода из </span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>let</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>'</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>,[glob]);<o:p></o:p></span></p>
  <p class=a><span class=GramE><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>end</span></span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>.<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>Если
используемая в функции переменная не определена в ней, компилятор предполагает,
что она глобальна и выдаёт предупреждение. <o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>Однако<span
class=GramE>,</span> если вы связываете имя глобальной переменной, думая, что
она локальная, это может вызвать проблемы. Поэтому нужно следовать такому
безопасному сценарию работы с глобальными переменными:<o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>1.
переменная создаётся с помощью </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";color:red;mso-ansi-language:EN-US'>defparameter</span><span
style='mso-fareast-font-family:"MS Mincho"'> (или с помощью </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";color:red;mso-ansi-language:
EN-US'>defvar</span><span style='mso-fareast-font-family:"MS Mincho"'>, если
переменная должна быть инициализирована только один раз за жизнь программы)</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>2.
Имя переменной должно быть окружено звёздочками, *</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>my</span><span
style='mso-fareast-font-family:"MS Mincho"'>-</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>variable</span><span
style='mso-fareast-font-family:"MS Mincho"'>*.<o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>3.
Приложение должно собираться без предупреждений &quot;variable ... </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>assumed</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>special</span><span
style='mso-fareast-font-family:"MS Mincho"'>&quot;. В частности, глобальная
переменная должна быть объявлена по течению процесса сборки до любого её
использования.<o:p></o:p></span></p>

<h3><a name="_Toc346328138"><span style='mso-fareast-font-family:"MS Mincho"'>Многонитевые
приложения</span></a><span style='mso-fareast-font-family:"MS Mincho"'><o:p></o:p></span></h3>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>В
многонитевом (многопоточном, </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>multi</span><span style='mso-fareast-font-family:
"MS Mincho"'>-</span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>thread</span><span style='mso-fareast-font-family:
"MS Mincho"'>) приложении принципиально возможно два режима работы с глобальной
переменной. У переменной есть общее для всех нитей глобальное значение. Оно
действует в тех нитях, где переменная не связана с помощью </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";color:red;mso-ansi-language:
EN-US'>let</span><span style='mso-fareast-font-family:"MS Mincho"'>. Присваивание
с помощью </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>setf</span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho"'> </span><span style='mso-fareast-font-family:"MS Mincho"'>в одной
такой нити меняет её значение во всех остальных, т.е., она ведёт себя как </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>var</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>в </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>Delphi</span><span
style='mso-fareast-font-family:"MS Mincho"'>. Такая переменная является потокобезопасной
и не вернёт мусор, если её значение меняется в другой нити в момент чтения. <o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'><span
style='mso-spacerun:yes'> </span>Когда переменная в данной нити связана с
помощью </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
color:red;mso-ansi-language:EN-US'>let</span><span style='mso-fareast-font-family:
"MS Mincho"'>, общее между нитями глобальное значение не меняется. Вместо этого
она на время действия </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>let</span><span style='mso-fareast-font-family:
"MS Mincho"'> получает в данной нити отдельное глобальное значение, видное
только этой нити (как </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>threadvar</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho"'> </span><span style='mso-fareast-font-family:
"MS Mincho"'>в </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>Delphi</span><span style='mso-fareast-font-family:
"MS Mincho"'>). При вложенных связываниях в этой же нити, или при присваиваниях
во время действия </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>let</span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho"'> </span><span style='mso-fareast-font-family:"MS Mincho"'>меняется
только отдельное глобальное значение, видимой в этой нити, остальные нити не
затрагиваются этим изменением. <o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>Таким
образом, связывание изолирует глобальную переменную от других нитей. <o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>Можно
установить перечень переменных, которые будут связаны для каждой новой нити при
её создании, <span class=GramE>см</span>. <span style='color:#339966'>mp:*process-initial-bindings*</span>,
и их начальных значений. <o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>Узнать,
связана ли переменная, можно в отладчике (жуке), включив меню </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>view</span><span
style='mso-fareast-font-family:"MS Mincho"'>/</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>bindings</span><span
style='mso-fareast-font-family:"MS Mincho"'>. Либо можно искать имя переменной
во всех исходных текстах и смотреть, что с ней происходит. При этом нужно
помнить, что </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>let</span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho"'> </span><span style='mso-fareast-font-family:"MS Mincho"'>является
не единственной конструкцией связывания.<o:p></o:p></span></p>

<h2><a name="_Toc346453804"></a><a name="_Toc346328139"><span style='mso-bookmark:
_Toc346453804'><span style='mso-fareast-font-family:"MS Mincho"'>Замыкания</span></span></a><span
style='mso-fareast-font-family:"MS Mincho"'><o:p></o:p></span></h2>

<p class=MsoNormal style='text-indent:18.0pt'><span style='mso-fareast-font-family:
"MS Mincho"'>Генератор анонимных функций </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";color:red;mso-ansi-language:EN-US'>lambda</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>имеет два аспекта. <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span style='mso-fareast-font-family:
"MS Mincho"'>Во-первых, при каждом выполнении он возвращает новую функцию без
имени. </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span style='mso-fareast-font-family:
"MS Mincho"'>Во-вторых, эта функция может ссылаться на локальные переменные,
существующие там, где вызван оператор </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>lambda</span><span style='mso-fareast-font-family:
"MS Mincho"'>, при этом, время жизни локальных переменных продлевается на весь
период жизни функции, созданной </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>lambda</span><span style='mso-fareast-font-family:
"MS Mincho"'>. </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span style='mso-fareast-font-family:
"MS Mincho"'>Замыкания реализованы в </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>Delphi</span><span style='mso-fareast-font-family:
"MS Mincho"'> 2009, хотя автору неизвестно, насколько полноценна их реализация.
<o:p></o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid windowtext;
 mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=475 valign=top style='width:356.4pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'><pre><span
  lang=EN-US style='font-size:9.0pt;mso-ansi-language:EN-US'>type<o:p></o:p></span></pre><pre><span
  lang=EN-US style='font-size:9.0pt;mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span>TProc = reference to function(x: Integer): function;<o:p></o:p></span></pre><pre><span
  lang=EN-US style='font-size:9.0pt;mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></pre><pre><span
  lang=EN-US style='font-size:9.0pt;mso-ansi-language:EN-US'>function Foo(a: Integer): TProc;<o:p></o:p></span></pre><pre><span
  lang=EN-US style='font-size:9.0pt;mso-ansi-language:EN-US'>begin<o:p></o:p></span></pre><pre><span
  lang=EN-US style='font-size:9.0pt;mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span>Foo := function(b: Integer): Integer;<o:p></o:p></span></pre><pre><span
  lang=EN-US style='font-size:9.0pt;mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span>begin<o:p></o:p></span></pre><pre><span
  lang=EN-US style='font-size:9.0pt;mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>    </span>Result := a + b;<o:p></o:p></span></pre><pre><span
  lang=EN-US style='font-size:9.0pt;mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>  </span>end;<span style='mso-spacerun:yes'>     </span><o:p></o:p></span></pre>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:9.0pt'>end;</span><span
  lang=EN-US style='font-size:9.0pt;mso-fareast-font-family:"MS Mincho"'><o:p></o:p></span></p>
  </td>
  <td width=511 valign=top style='width:382.9pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span style='font-size:9.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:9.0pt;
  mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:9.0pt;
  mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:9.0pt;
  mso-fareast-font-family:"MS Mincho"'>(defun Foo (a) <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:9.0pt;
  mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:9.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'>   
  </span>(lamdba (b)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:9.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'>     
  </span><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:9.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'>     
  </span><span style='mso-spacerun:yes'>  </span>(+ a b)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:9.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'>       
  </span>)<o:p></o:p></span></p>
  <pre><span style='font-size:9.0pt;mso-fareast-font-family:"MS Mincho"'>)</span><span
  style='font-size:9.0pt'><o:p></o:p></span></pre></td>
 </tr>
</table>

<h2><a name="_Toc346328140"></a><a name="_Toc346453805"><span style='mso-bookmark:
_Toc346328140'>Переменные и типы</span></a><span style='mso-bookmark:_Toc346328140'></span></h2>

<p class=MsoNormal><span style='mso-bookmark:_Toc346328140'>Переменные в лиспе
обычно не типизированы (имеют тип </span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='mso-ansi-language:EN-US'>t</span>, что означает &quot;любой
объект&quot;), хотя можно сделать их типизированными с помощью </span><span
style='mso-bookmark:_Toc346328140'><span lang=EN-US style='mso-ansi-language:
EN-US'>declare</span><span lang=EN-US> </span>или </span><span
style='mso-bookmark:_Toc346328140'><span lang=EN-US style='color:blue;
mso-ansi-language:EN-US'>with</span><span style='color:blue'>-</span></span><span
style='mso-bookmark:_Toc346328140'><span lang=EN-US style='color:blue;
mso-ansi-language:EN-US'>the</span><span style='color:blue'>1. </span>В этом
случае тип значения будет проверяться на соответствие, если только проверка не
отключена в компиляторе. Автоматическое преобразование типов в лиспе не
применяется. Узнать тип объекта можно с помощью (</span><span style='mso-bookmark:
_Toc346328140'><span lang=EN-US style='mso-ansi-language:EN-US'>type</span>-</span><span
style='mso-bookmark:_Toc346328140'><span lang=EN-US style='mso-ansi-language:
EN-US'>of</span><span lang=EN-US> </span>объект). Узнать тип переменной
стандарт не позволяет, автор пользуется </span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>budden</span><span
style='color:blue'>-</span></span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>tools</span><span
style='color:blue'>::</span></span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>variable</span><span
style='color:blue'>-</span></span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>type</span><span
style='color:blue'>-</span></span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>or</span><span
style='color:blue'>-</span></span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>class</span><span
lang=EN-US> </span>(см. применения в библиотеке). Также есть </span><span
style='mso-bookmark:_Toc346328140'><span lang=EN-US style='color:#99CC00;
mso-ansi-language:EN-US'>hcl</span><span style='color:#99CC00'>:</span></span><span
style='mso-bookmark:_Toc346328140'><span lang=EN-US style='color:#99CC00;
mso-ansi-language:EN-US'>variable</span><span style='color:#99CC00'>-</span></span><span
style='mso-bookmark:_Toc346328140'><span lang=EN-US style='color:#99CC00;
mso-ansi-language:EN-US'>information</span>, но она</span><span
style='mso-bookmark:_Toc346328140'><span style='mso-ansi-language:EN-US'> </span>почему-то
не показывает тип. </span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc346328140'>Работа с
нетипизированными переменными в лиспе может показаться похожей на работу с
типом </span><span style='mso-bookmark:_Toc346328140'><span lang=EN-US
style='mso-ansi-language:EN-US'>variant</span> в </span><span style='mso-bookmark:
_Toc346328140'><span lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span>, но
это не так. При работе с типом </span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='mso-ansi-language:EN-US'>variant</span> происходят
автоматические преобразования типов (например, можно превратить числовой
вариант в строку и наоборот), а лисп этого не делает. Преобразования типов в
лиспе всегда являются явными (например, </span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>coerce</span><span
style='color:red'>, </span></span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>prin</span><span
style='color:red'>1-</span></span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>to</span><span
style='color:red'>-</span></span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>string</span><span
style='color:red'>, </span></span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>read</span><span
style='color:red'>-</span></span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>from</span><span
style='color:red'>-</span></span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>string</span><span
style='color:red'>, </span></span><span style='mso-bookmark:_Toc346328140'><span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>parse-integer, string</span>)</span></p>

<p class=MsoNormal><span style='mso-bookmark:_Toc346328140'><o:p>&nbsp;</o:p></span></p>

<h1><span style='mso-bookmark:_Toc346328140'><a name="_Toc346453806">Управляющие
конструкции</a></span></h1>

<h2><a name="_Toc346453807">Определение и вызов функции, возврат значений, </a><span
style='mso-bookmark:_Toc346453807'><span lang=EN-US style='mso-ansi-language:
EN-US'>if</span>, циклы, локальные функции, указатели на функции, </span><span
style='mso-bookmark:_Toc346453807'><span lang=EN-US style='mso-ansi-language:
EN-US'>try</span>..</span><span style='mso-bookmark:_Toc346453807'><span
lang=EN-US style='mso-ansi-language:EN-US'>except</span></span></h2>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid windowtext;
 mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><st1:place w:st="on"><span
   lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:
   EN-US'>Delphi</span></st1:place><span style='mso-fareast-font-family:"MS Mincho"'><o:p></o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:EN-US'>CL<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'>function
  f(s:string;o:TObject):string;<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'>begin;<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'>s:=s+s;<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'>result:=s+o.ClassName;<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'>end;</span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-fareast-font-family:"MS Mincho"'>(defun f (s o)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'> 
  </span>(setf s (<span style='color:blue'>str+</span> 'string s s))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'>  </span>(<span
  style='color:blue'>str++</span> 'string local-s (type-of o))</span><span
  style='font-size:10.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-fareast-font-family:"MS Mincho"'><span style='mso-spacerun:yes'> 
  </span>)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span class=GramE><span style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";
  mso-ansi-language:RU'>; составные объекты (массивы, структуры, экземпляры </span></span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>; классов)
  передаются в функции так же, как объекты <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>; в </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>Delphi</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>. При
  модифицирующих операциях со строками <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>; меняется
  исходная строка<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-ansi-language:
  RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-ansi-language:
  RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'>procedure
  p(var o:TObject);<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'>begin<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'>o:=someOtherObject;<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'>end;<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'>p(x);<o:p></o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>для</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>возврата</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>нескольких</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>значений</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>из</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>функции</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>можно</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>использовать</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> <span lang=EN-US style='color:red'>values</span><span
  lang=EN-US> </span></span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>и</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> <span lang=EN-US style='color:red'>multiple-value-bind</span><span
  lang=EN-US>. </span></span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>Для
  произвольных действий с переменной можно использовать макрос. Имитация </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>var</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>параметра в </span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue'>budden-tools:</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(defun p (o)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(<span style='color:blue'>with-byref-params
  </span>(o)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>    </span>(setf o someOtherObject)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>    </span>)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(p (<span
  style='color:blue'>byref</span> x))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt'>If
  j=0 then result:=0 else result:=j+4;<o:p></o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(if (= j 0) 0
  (+ 4 j))<span style='mso-spacerun:yes'>  </span>; if </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>возвращает</span><span style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'> </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>значение</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>if a=1 then <o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>writeln('</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>один</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
  "Courier New";mso-ansi-language:EN-US'>')<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>else if a=2 then<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'> </span><span
  style='mso-spacerun:yes'> </span>writeln('</span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;font-family:"Courier New"'>два</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
  "Courier New";mso-ansi-language:EN-US'>')<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>else <o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>writeln('</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>много</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
  "Courier New";mso-ansi-language:EN-US'>');<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(<span
  style='color:red'>cond</span><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>((= a 1) <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>    </span>(print &quot;</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>один</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>&quot;))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>((= a 2)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>    </span>(print &quot;</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>два</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>&quot;))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(t<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>   </span>(print &quot;</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>много</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>&quot;)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>   </span>) ; тоже возвращает значение, в отличие от
  </span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'>Delphi</span><span style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";
  mso-ansi-language:RU'><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>for i:=0 to N-1 do<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>begin<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>if i=5 then continue;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>if i=7 then break;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>writeln(i);<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>end<o:p></o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>(</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>dotimes</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> (</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>i</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>N</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>)<span class=GramE>
  ;</span> только от 0 до </span><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>N</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>-1! <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>   </span></span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(when
  (= i 5) (go :continue))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>   </span>(when (= i 7) (return nil))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>   </span>(print i)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>   </span>:continue)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>ЛИБО </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>(</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue'>iter</span><span class=GramE><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue;mso-ansi-language:RU'> </span><span style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";
  mso-ansi-language:RU'>;</span></span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'> мощнее, но хуже поддерживается отладчиком<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>  </span></span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(:for i
  :from 0 :to (- N 1))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(:when (= i 5) (:next-iteration))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(:when (= i 7) (return nil))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>)<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>while i&gt;j do<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>inc(i,-1);<o:p></o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(loop<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(unless (&gt; i j) <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>     </span>(return nil))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>  </span>(</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>incf</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'> </span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>i</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'> –1)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>  </span>)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>ИЛИ <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>(</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue'>iter</span><span class=GramE><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue;mso-ansi-language:RU'> </span><span style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";
  mso-ansi-language:RU'>;</span></span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'> мощнее, но хуже поддерживается отладчиком<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";color:blue'><span
  style='mso-spacerun:yes'>  </span></span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(:while
  (&gt; i j))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(incf i –1)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>)<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:7'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>procedure outer; //</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New"'> пример локальной функции<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>var v:variant;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>procedure inner;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>begin<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>v:=v+1;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>end<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>begin{procedure outer}</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New"'><o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>v:=0;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>inner;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>end;<o:p></o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(defun outer
  ()<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";color:blue'><span
  style='mso-spacerun:yes'>  </span></span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(let
  ((v 0))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>    </span>(flet ((inner ()<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>              </span>(incf v)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>               </span>))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>       </span>(inner)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>       </span>)))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>ЛИБО</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(defun outer
  ()<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>  </span>(</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";
  color:blue'>proga</span><span class=GramE><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'> ;</span></span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> нестандартно,
  эквивалентно предыдущему,<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>         </span>; но меньше скобок и хуже
  поддерживается отладч.<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>     </span>(</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>let</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>v</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> 0)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>     </span>(flet inner ()<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>        </span>(incf v))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>     </span>(inner)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>     </span>))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>     </span><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:8'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>try<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>op1; <o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>op2;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>except<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>on E1:class1 do<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>    </span>begin<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>    </span>writeln(E1.message);<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>    </span>op4;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>    </span>end<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>on E2:class2 do<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>    </span>begin<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>    </span>raise;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>    </span>end<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>end;<o:p></o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(handler-case<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(progn<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>    </span>op1<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>    </span>op2)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(class1 (e1)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>    </span>(princ e1)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>    </span>op4<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>    </span>)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(class2 (e2)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>    </span>(</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>error</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>e</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>2)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>    </span>)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>  </span>) ; </span><i style='mso-bidi-font-style:
  normal'><span style='font-size:6.0pt;mso-fareast-font-family:"MS Mincho";
  mso-ansi-language:RU'>ну вот, заодно и сам узнал</span></i><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'><span style='mso-spacerun:yes'>   </span><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:9'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>// </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  font-family:"Courier New"'>указатели на функции<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>var</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New"'> </span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>myFunc</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  font-family:"Courier New"'>:</span><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'><o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>function(x,y:integer):integer<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;font-family:"Courier New"'><span
  style='mso-spacerun:yes'>  </span>=@</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>namedFunction</span><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;font-family:"Courier New"'> </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
  "Courier New";mso-ansi-language:EN-US'><o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>result:=myFunc(1,2);<o:p></o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt'>(let ((myfunc #'namedFunction)) <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt'>(funcall 'myfunc 1 2))</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:10;mso-yfti-lastrow:yes'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
</table>

<h2><a name="_Toc346453808"></a><a name="_Toc346328141"></a><a
name="_Ref346327512"><span style='mso-bookmark:_Toc346328141'><span
style='mso-bookmark:_Toc346453808'></span></span></a><span class=GramE><span
style='mso-bookmark:_Ref346327512'><span style='mso-bookmark:_Toc346328141'><span
style='mso-bookmark:_Toc346453808'><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>try</span></span></span></span></span><span
style='mso-bookmark:_Ref346327512'><span style='mso-bookmark:_Toc346328141'><span
style='mso-bookmark:_Toc346453808'><span style='mso-fareast-font-family:"MS Mincho"'>..</span></span></span></span><span
style='mso-bookmark:_Ref346327512'><span style='mso-bookmark:_Toc346328141'><span
style='mso-bookmark:_Toc346453808'><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>finally</span></span></span></span><span
style='mso-bookmark:_Toc346453808'></span><span style='mso-bookmark:_Toc346328141'></span><span
style='mso-bookmark:_Ref346327512'></span><span style='mso-fareast-font-family:
"MS Mincho"'><o:p></o:p></span></h2>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>Обычно,
если нужно совершить какую-то очистку действия при выходе (даже аварийном) из
функции, в Дельфи используется </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>try</span><span style='mso-fareast-font-family:
"MS Mincho"'>..finally. <o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'>В
Лиспе для этого используется аналогичная конструкция, </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";color:red;mso-ansi-language:EN-US'>unwind</span><span
style='mso-fareast-font-family:"MS Mincho";color:red'>-</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";color:red;mso-ansi-language:EN-US'>protect</span><span
style='mso-fareast-font-family:"MS Mincho"'>, но, благодаря наличию макросов,
можно сделать конструкцию очень лаконичной. Например, если определить<o:p></o:p></span></p>

<p class=a><span style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:
RU'><o:p>&nbsp;</o:p></span></p>

<p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'>(<span
class=GramE><span style='color:red'>defmacro</span></span> with-guarded-x ((var
&amp;rest args) &amp;body body)<o:p></o:p></span></p>

<p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
style='mso-spacerun:yes'>  </span><span class=GramE>`(</span>let ((,var
(create-x ,@args)))<o:p></o:p></span></p>

<p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
style='mso-spacerun:yes'>     </span>(<span class=GramE>unwind-</span>protect<o:p></o:p></span></p>

<p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
style='mso-spacerun:yes'>       </span>(<span class=GramE>progn</span> ,@body)<o:p></o:p></span></p>

<p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
style='mso-spacerun:yes'>       </span>(<span class=GramE>clear-x</span> ,var)<o:p></o:p></span></p>

<p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
style='mso-spacerun:yes'>       </span>)))<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span style='mso-fareast-font-family:
"MS Mincho"'>то вызов<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Courier New";
mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>(<span
class=GramE>with-guarded-x</span> (a arg1 arg2) <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:35.4pt;text-indent:35.4pt'><span
lang=EN-US style='font-family:"Courier New";mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>(<span class=GramE>do-somehing-1</span>)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:70.8pt;text-indent:0cm'><span lang=EN-US
style='font-family:"Courier New";mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>(<span class=GramE>do-something-2</span>))<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:"Courier New";mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=MsoBodyTextIndent style='text-indent:0cm'><span style='mso-fareast-font-family:
"MS Mincho"'>при компиляции развернётся <span class=GramE>в</span><o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:191;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'>(let
  ((a (create-x arg1 arg2)))<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(unwind-protect<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>     </span>(progn </span><span style='mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'><o:p></o:p></span></p>
  <p class=a><span style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'><span style='mso-spacerun:yes'>       </span></span><span lang=EN-US
  style='mso-fareast-font-family:"MS Mincho"'>(do-somehing-1) </span><span
  style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>     </span></span><span style='mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'><span style='mso-spacerun:yes'>  </span>(</span><span
  lang=EN-US style='mso-fareast-font-family:"MS Mincho"'>do-something-2)<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>       </span>)<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>    </span>(clear-x a)))<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'>var
  a:x;<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'>begin<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'>a:=x.create(arg1,arg2);<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'>try<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>doSomething1;<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>doSomething2;<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'>finally<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>freeAndNil(a);<o:p></o:p></span></p>
  <p class=a><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>end;<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoBodyTextIndent>Если нить исполнения (поток, процесс) <span
class=GramE>убивается</span> с помощью <span style='color:#339966'>mp:process-kill</span>,
то ресурсы не будут освобождены до тех пор, пока объект не попадёт под сборку
мусора, а это может занять неопределённое время. Для освобождения ресурсов в
этой ситуации нужно использовать <span style='color:#339966'>mp:ensure-process-cleanup<o:p></o:p></span></p>

<h2><a name="_Toc346453809"><span lang=EN-US style='mso-ansi-language:EN-US'>Overload</span></a></h2>

<p class=MsoNormal><span style='mso-fareast-language:ZH-CN'>Вместо </span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>overload</span><span
lang=EN-US style='mso-fareast-language:ZH-CN'> </span><span style='mso-fareast-language:
ZH-CN'>есть другие, более мощные инструменты<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-fareast-language:ZH-CN'>1. Родовые функции.
В отличие от Дельфовых </span><span lang=EN-US style='mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>overload</span><span style='mso-fareast-language:
ZH-CN'>, лисповые родовые функции смотрят не на тип формального параметра, а на
тип фактического параметра, т.е<span class=GramE>.в</span>ыбор того или иного
варианта </span><span lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>overload</span><span lang=EN-US style='mso-fareast-language:ZH-CN'> </span><span
style='mso-fareast-language:ZH-CN'>происходит не во время компиляции, а во
время выполнения. Более подробно <span class=GramE>описаны</span> в главе про
ООП. <o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-fareast-language:ZH-CN'>2. Необязательные параметры
&amp;</span><span lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>optional</span><span style='mso-fareast-language:ZH-CN'>, ключи &amp;</span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>key</span><span
style='mso-fareast-language:ZH-CN'>, получение всех параметров в виде списка </span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>&amp;rest</span><span
style='mso-fareast-language:ZH-CN'>. Синтаксис вызова функции лиспа примерно
соответствует синтаксису команды операционной системы. Параметры в конце могут
быть не <span class=GramE>заданы</span> и они заменяются умолчаниями. Также
могут быть заданы параметры ключи, например: <o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-fareast-language:ZH-CN'><o:p>&nbsp;</o:p></span></p>

<p class=a><span lang=EN-US style='mso-fareast-language:ZH-CN'>(<span
class=GramE>position</span> #\b &quot;Abc&quot; :test 'char-equal)<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-fareast-language:ZH-CN'>- использован
параметр-ключ<span class=GramE> :</span>test со значением 'char-equal. <o:p></o:p></span></p>

<h1><a name="_Toc346453810"></a><a name="_Toc346328143"><span style='mso-bookmark:
_Toc346453810'>Организация проекта. Файлы, пакеты, </span></a><span
style='mso-bookmark:_Toc346328143'><span style='mso-bookmark:_Toc346453810'><span
lang=EN-US style='mso-ansi-language:EN-US'>eval</span>-</span></span><span
style='mso-bookmark:_Toc346328143'><span style='mso-bookmark:_Toc346453810'><span
lang=EN-US style='mso-ansi-language:EN-US'>when</span>, #., </span></span><span
style='mso-bookmark:_Toc346328143'><span style='mso-bookmark:_Toc346453810'><span
lang=EN-US style='mso-ansi-language:EN-US'>asdf</span>-системы, динамическая
разработка</span></span></h1>

<p class=MsoBodyTextIndent>Структура проекта и процесс загрузки приложения на
Лиспе гораздо сложнее, чем на Дельфи, поскольку:</p>

<p class=MsoBodyTextIndent>- в Дельфи мало что можно <span class=GramE>поменять</span>
во время выполнения, а в Лиспе можно поменять почти всё</p>

<p class=MsoBodyTextIndent>- понятие модуля в Дельфи являются монолитными, а в
Лиспе оно разделено на несколько понятий</p>

<p class=MsoBodyTextIndent>- многое из того, что <span
style='mso-spacerun:yes'> </span>в Дельфи делается автоматически, в Лиспе нужно
делать руками. </p>

<h2><a name="_Toc346453811"></a><a name="_Toc346328144"><span style='mso-bookmark:
_Toc346453811'>Определения понятий</span></a></h2>

<p class=MsoBodyTextIndent>Файл *.<span lang=EN-US style='mso-ansi-language:
EN-US'>lisp</span><span lang=EN-US> </span>– аналог *.<span lang=EN-US
style='mso-ansi-language:EN-US'>pas</span></p>

<p class=MsoBodyTextIndent>Файл *.<span lang=EN-US style='mso-ansi-language:
EN-US'>ofasl</span> – аналог *.<span lang=EN-US style='mso-ansi-language:EN-US'>dcu</span>.
Могут размещаться в разных экзотических местах, <span class=GramE>см</span>.
эти места при компиляции или ищите поиском по диску. </p>

<p class=MsoBodyTextIndent>Пакет – пространство имён (перечень имён, допустимых
в определённом контексте, который может меняться во время выполнения).</p>

<p class=MsoBodyTextIndent><span class=GramE><span lang=EN-US style='mso-ansi-language:
EN-US'>eval</span>-<span lang=EN-US style='mso-ansi-language:EN-US'>when</span></span>
– аналог {$<span lang=EN-US style='mso-ansi-language:EN-US'>if</span><span
lang=EN-US> </span>файлКомпилируется} ... {$<span lang=EN-US style='mso-ansi-language:
EN-US'>elseif</span><span lang=EN-US> </span>файлЗагружается} ... {$<span
lang=EN-US style='mso-ansi-language:EN-US'>endif</span>}, позволяет выполнять
тот или иной код на этапе компиляции и/или загрузки уже скомпилированного
файла. </p>

<p class=MsoBodyTextIndent>#. – позволяет выполнять код в момент чтения текста
программы из файла (до компиляции).</p>

<p class=MsoBodyTextIndent><span class=GramE><span lang=EN-US style='mso-ansi-language:
EN-US'>asdf</span>-система</span> – аналог файла проекта или <span lang=EN-US
style='mso-ansi-language:EN-US'>makefile</span>. Типичная программа содержит
множество взаимосвязанных систем <span lang=EN-US style='mso-ansi-language:
EN-US'>asdf</span>, каждая из которых имеет свой каталог и определение в файле *.<span
lang=EN-US style='mso-ansi-language:EN-US'>asd</span>. </p>

<p class=MsoBodyTextIndent>Динамическая разработка – возможность менять код
программы без её остановки. </p>

<p class=MsoBodyTextIndent style='text-indent:0cm'><span class=2><span
style='font-size:16.0pt;mso-bidi-font-size:14.0pt'><o:p>&nbsp;</o:p></span></span></p>

<p class=MsoBodyTextIndent style='text-indent:0cm'><a name="_Toc346453812"></a><a
name="_Toc346328145"><span style='mso-bookmark:_Toc346453812'><span class=2><span
style='font-size:16.0pt;mso-bidi-font-size:14.0pt'>Таблица аналогий</span></span></span></a></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid windowtext;
 mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=175 valign=top style='width:131.4pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><st1:place w:st="on"><span lang=EN-US style='font-size:
   10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
   EN-US'>Delphi</span></st1:place><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New"'><o:p></o:p></span></p>
  </td>
  <td width=811 valign=top style='width:607.9pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'>CL</span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'><o:p></o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=175 valign=top style='width:131.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  font-family:"Courier New"'>*</span><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>.dpr<o:p></o:p></span></p>
  </td>
  <td width=811 valign=top style='width:607.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>Скрипт загрузки, с
  помощью которого «голая» лисп-система превращается в программу (мы ещё не
  рассматриваем </span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho"'>save</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>-</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>image</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>, но это в другой раз). Содержит инструкции
  по компиляции и загрузке всей системы. <o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=175 valign=top style='width:131.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>unit</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'><o:p></o:p></span></p>
  </td>
  <td width=811 valign=top style='width:607.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>1. </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>unit</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>как единица сборки – файл, <span
  class=GramE>включённого</span> в </span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>asdf</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>-систему или просто загружаемого из скрипта
  загрузки. <o:p></o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>2. </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>unit</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>как пространство имён – пакет<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=175 valign=top style='width:131.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>interface,
  implementation<o:p></o:p></span></p>
  </td>
  <td width=811 valign=top style='width:607.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a><span class=GramE><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>interface</span></span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'> - внешние символы пакета (обычно – в файле
  каталогСистемы/</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho"'>package</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>.</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>lisp</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>, иногда – в файле исходного текста, форма </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:red'>defpackage</span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'>, </span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";color:blue'>def</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue;mso-ansi-language:RU'>-</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue'>merge</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";color:blue;mso-ansi-language:RU'>-</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue'>packages</span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";color:blue;
  mso-ansi-language:RU'>::!</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>).
  Перечислены только имена сущностей, но не их типы.<o:p></o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>Сами сущности (функции,
  макросы, типы, переменные) определены в исходном тексте без разбивки на </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>interface</span><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>и </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>implementation</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=175 valign=top style='width:131.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>uses<o:p></o:p></span></p>
  </td>
  <td width=811 valign=top style='width:607.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>Если рассматривать </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>unit</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>как единицу сборки, то зависимости
  указываются в </span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho"'>asdf</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'> </span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'>– системе. При неправильном порядке сборки, как правило, будут ошибки или
  предупреждения, а в худшем случае – молчаливая неправильная работа. <o:p></o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>Если рассматривать </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>unit</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>как набор допустимых имён, то зависимости
  указываются в форме определения пакета (:</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>use</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>,<span class=GramE>
  :</span></span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho"'>import</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>-</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>from</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>). Но можно и без этого вызывать функцию из
  другого пространства имён с помощью префикса, главное, что символ должен
  существовать на момент чтения файла<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td width=175 valign=top style='width:131.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>initialization<o:p></o:p></span></p>
  </td>
  <td width=811 valign=top style='width:607.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>Любые формы,
  записанные в исходном тексте файла .</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>lisp</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>, выполняются во время загрузки (за
  исключением </span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho"'>eval</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>-</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>when</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>).<o:p></o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>Даже определение
  функции является не просто декларацией, а командой лисп-системе «в момент
  загрузки создай такую-то функцию». <o:p></o:p></span></p>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>Нужно учитывать,
  что в Дельфи сначала компилируется вся программа, а только потом запускается </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>initialization</span><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>первого модуля. В
  Лиспе, как правило, порядок действий другой: компиляция </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>f</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>1.</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>lisp</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> (если он
  требует перекомпиляции) – загрузка </span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>f</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>1.</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>ofasl</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>, компиляция </span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>f</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>2.</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>lisp</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>, загрузка </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>f</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>2.</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>ofasl</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> и т.п. При
  этом<span class=GramE>,</span> для компиляции </span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>f</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>2.</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>lisp</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>могут использоваться символы, функции и
  данные, определённые в </span><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>f</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>1.</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>lisp</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>. Про функции из </span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>f</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>3.</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>lisp</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>система в этот момент ещё и не подозревает.<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6;mso-yfti-lastrow:yes'>
  <td width=175 valign=top style='width:131.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>finalization<o:p></o:p></span></p>
  </td>
  <td width=811 valign=top style='width:607.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>отсутствует, хотя можно
  задавать действия на уровне системы при выгрузке с помощью <span
  style='color:#339966'>lispworks:define-action</span><o:p></o:p></span></p>
  </td>
 </tr>
</table>

<h3><a name="_Toc346328146">Что должно входить в файл *.</a><span
style='mso-bookmark:_Toc346328146'><span lang=EN-US style='mso-ansi-language:
EN-US'>lisp</span></span></h3>

<p class=MsoBodyTextIndent>В файле <b>*.</b><b><span lang=EN-US
style='mso-ansi-language:EN-US'>lisp</span><span lang=EN-US> </span></b><span
style='mso-bidi-font-weight:bold'>обязательно </span>должна быть (в начале)
форма (<span lang=EN-US style='mso-ansi-language:EN-US'>in</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>package</span><span class=GramE> :</span>имяПространстваИмён),
которая задаёт пространство имён этого файла. Само пространство имён может быть
определено в другом месте, но иногда оно определяется в самом файле. Тогда
форма (<span lang=EN-US style='mso-ansi-language:EN-US'>in</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>package</span> ...) должна идти
после определения пакета, а само определение рекомендуется делать с помощью <span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>def</span><span
style='color:blue'>-</span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US'>merge</span><span style='color:blue'>-</span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US'>packages</span><span
style='color:blue'>::!</span> с<span class=GramE> :</span><span lang=EN-US
style='mso-ansi-language:EN-US'>always</span><span lang=EN-US> </span><span
lang=EN-US style='mso-ansi-language:EN-US'>t</span>. <span lang=EN-US
style='mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style='color:blue'>Также</span><span
style='color:blue;mso-ansi-language:EN-US'> </span><span style='color:blue'>должна</span><span
style='color:blue;mso-ansi-language:EN-US'> </span><span style='color:blue'>быть</span><span
style='color:blue;mso-ansi-language:EN-US'> </span><span style='color:blue'>форма</span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'> (in-readtable<span
class=GramE> :</span>buddens-readtable-a), </span><span style='color:blue'>причём</span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>, </span><span
style='color:blue'>символ</span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US'> EDITOR-HINTS.NAMED-READTABLES:<span class=GramE>IN-READTABLE) <span
lang=RU style='mso-ansi-language:RU'>должен</span><span lang=RU> </span><span
lang=RU style='mso-ansi-language:RU'>быть</span><span lang=RU> </span><span
lang=RU style='mso-ansi-language:RU'>доступен</span><span lang=RU> </span><span
lang=RU style='mso-ansi-language:RU'>в</span><span lang=RU> </span><span
lang=RU style='mso-ansi-language:RU'>данном</span><span lang=RU> </span><span
lang=RU style='mso-ansi-language:RU'>пространстве</span><span lang=RU> </span><span
lang=RU style='mso-ansi-language:RU'>имён</span>.</span> </span><span
style='color:blue'>Желательна также форма </span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US'>(asdf::of-system<span class=GramE> :</span></span><span
style='color:blue'>система). <o:p></o:p></span></p>

<p class=MsoBodyTextIndent>Во время чтения файла при компиляции могут возникать
новые символы. Такие символы будут добавляться в заданный пакет в качестве <span
class=GramE>внутренних</span> (неэкспортированных). <span lang=EN-US
style='mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=MsoBodyTextIndent>Файл *.<span lang=EN-US style='mso-ansi-language:
EN-US'>asd</span><span lang=EN-US> </span>здесь не описан, <span class=GramE>см</span>.
примеры. </p>

<h2><a name="_Toc346453813"></a><a name="_Toc346328147"><span style='mso-bookmark:
_Toc346453813'>Динамическая разработка, основные сценарии</span></a></h2>

<p class=MsoBodyTextIndent>Динамическая разработка есть в <span lang=EN-US
style='mso-ansi-language:EN-US'>SQL</span> (<span lang=EN-US style='mso-ansi-language:
EN-US'>create</span>/<span lang=EN-US style='mso-ansi-language:EN-US'>alter</span>/<span
lang=EN-US style='mso-ansi-language:EN-US'>drop</span><span lang=EN-US> </span><span
lang=EN-US style='mso-ansi-language:EN-US'>table</span>, <span lang=EN-US
style='mso-ansi-language:EN-US'>procedure</span><span lang=EN-US> </span>и
т.п.). В Лиспе она по сути, такая же по смыслу – можно менять отдельные объекты.
</p>

<h3><a name="_Toc346328148">Работа</a><span style='mso-bookmark:_Toc346328148'><span
style='mso-ansi-language:EN-US'> </span>в</span><span style='mso-bookmark:_Toc346328148'><span
style='mso-ansi-language:EN-US'> <span lang=EN-US style='color:red'>listener</span><span
lang=EN-US> (REPL)</span></span></span><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></h3>

<p class=MsoBodyTextIndent>В <span lang=EN-US style='mso-ansi-language:EN-US'>listener</span><span
lang=EN-US> </span>можно выполнять практически любые действия, например,
создавать и вызывать функции, определять классы, изучать данные. Последнее
возвращённое выражение в листенере печатает, далее можно нажать на микроскоп (<span
lang=EN-US style='mso-ansi-language:EN-US'>Inspect</span>) и просмотреть
внутреннюю структуру объекта, это особенно важно для классов, содержимое
которых не видно на печати. </p>

<h3><a name="_Toc346328149">Разработка по одной форме в файле</a></h3>

<p class=MsoBodyTextIndent>В <span lang=EN-US style='mso-ansi-language:EN-US'>listener</span><span
lang=EN-US> </span>хорошо отлаживать фрагменты программы и программировать
факториалы. При &quot;настоящем&quot; программировании, для нового логически
связанного фрагмента программы сразу создают новый файл. Файл сначала создаётся
согласно пункту «что должно входить в файл *.<span lang=EN-US style='mso-ansi-language:
EN-US'>lisp</span>», см. чуть выше. Далее в него вносят определения функций и с
помощью команды <span lang=EN-US style='mso-ansi-language:EN-US'>Compile</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>defun</span>
(<span lang=EN-US style='mso-ansi-language:EN-US'>f</span>7) компилируют их по
одному. Смотрят на предупреждения. Каждое определение можно проверить в
листенере, при этом желательно предварительно сделать в нём команду (<span
lang=EN-US style='mso-ansi-language:EN-US'>in</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>package</span><span class=GramE><span
lang=EN-US> </span>:</span>тотЖеПакет), чтобы было меньше путаницы. При
перекомпиляции сущности ведут себя так:</p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:191;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>Сущность</p>
  </td>
  <td width=691 valign=top style='width:517.9pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>Как ведёт себя</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>функция (<span lang=EN-US
  style='mso-ansi-language:EN-US'>defun)<o:p></o:p></span></p>
  </td>
  <td width=691 valign=top style='width:517.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>сразу вступает в действие.
  Все другие функции будут вызывать её. Если функция находится на стеке,
  продолжит выполняться старое тело до выхода. Рекурсивные вызовы будут
  вызывать новое тело. Но! Всё это может не работать при включенных
  оптимизациях. </p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>глобальная переменная 1 (<span
  lang=EN-US style='mso-ansi-language:EN-US'>defparameter)<o:p></o:p></span></p>
  </td>
  <td width=691 valign=top style='width:517.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>присваивается новое
  значение</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>глобальная переменная 2 (<span
  lang=EN-US style='mso-ansi-language:EN-US'>defvar)<o:p></o:p></span></p>
  </td>
  <td width=691 valign=top style='width:517.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>если переменная уже была
  переменной, заданной с помощью <span lang=EN-US style='mso-ansi-language:
  EN-US'>defvar</span>, НЕ присваивается новое значение, выдаётся
  предупреждение</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'><span lang=EN-US
  style='mso-ansi-language:EN-US'>defconstant<o:p></o:p></span></p>
  </td>
  <td width=691 valign=top style='width:517.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>лучше так не делать. Если
  очень надо, сделать <span lang=EN-US style='mso-ansi-language:EN-US'>unintern</span>
  символу из всех пакетов, а затем перекомпилировать весь зависимый код</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'><span lang=EN-US
  style='mso-ansi-language:EN-US'>defstruct<o:p></o:p></span></p>
  </td>
  <td width=691 valign=top style='width:517.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>действует новое
  определение. Экземпляры протухают</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6'>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'><span lang=EN-US
  style='mso-ansi-language:EN-US'>defclass<o:p></o:p></span></p>
  </td>
  <td width=691 valign=top style='width:517.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>действует новое
  определение. Экземпляры остаются с новым определением, но конструктор не
  вызывается заново. </p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:7'>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'><span lang=EN-US
  style='mso-ansi-language:EN-US'>defmacro<o:p></o:p></span></p>
  </td>
  <td width=691 valign=top style='width:517.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>действует новое
  определение, но ранее скомпилированный код, в котором используется этот
  макрос, не меняется. Нужно его перекомпилировать.</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:8'>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'><span lang=EN-US
  style='mso-ansi-language:EN-US'>deftype<o:p></o:p></span></p>
  </td>
  <td width=691 valign=top style='width:517.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>не знаю. Безопасным будет
  перекомпилировать зависимый код</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:9'>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'><span lang=EN-US
  style='mso-ansi-language:EN-US'>def</span>ЧтоТо</p>
  </td>
  <td width=691 valign=top style='width:517.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>Любой человек может
  создать своё <span class=GramE><span lang=EN-US style='mso-ansi-language:
  EN-US'>def</span></span>ЧтоТо, см. определение этого <span lang=EN-US
  style='mso-ansi-language:EN-US'>def</span>ЧтоТо</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:10'>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>пространство имён <span
  lang=EN-US style='mso-ansi-language:EN-US'>defpackage<o:p></o:p></span></p>
  </td>
  <td width=691 valign=top style='width:517.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>сразу вступает в действие
  новое определение. Старые внутренние символы остаются на месте. </p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:11;mso-yfti-lastrow:yes'>
  <td width=295 valign=top style='width:221.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>система <span lang=EN-US
  style='mso-ansi-language:EN-US'>asdf</span> (<span lang=EN-US
  style='mso-ansi-language:EN-US'>defsystem</span>) </p>
  </td>
  <td width=691 valign=top style='width:517.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoBodyTextIndent style='text-indent:0cm'>её не надо
  перекомпилировать. Вместо этого попробуйте её перезагрузить (см. мануал <span
  lang=EN-US style='mso-ansi-language:EN-US'>asdf</span><span lang=EN-US> </span>или
  просто <span lang=EN-US style='mso-ansi-language:EN-US'>asdf</span>::! ), внимательно
  глядя на <span style='color:red'>*</span><span lang=EN-US style='color:red;
  mso-ansi-language:EN-US'>standard</span><span style='color:red'>-</span><span
  lang=EN-US style='color:red;mso-ansi-language:EN-US'>output</span><span
  class=GramE><span style='color:red'>*</span> В</span> сложных случаях проще
  всего стереть все *.<span lang=EN-US style='mso-ansi-language:EN-US'>ofasl</span><span
  lang=EN-US> </span>и перезапустить лисп-систему.</p>
  </td>
 </tr>
</table>

<h3><a name="_Toc346328150">Перекомпиляция файла целиком</a></h3>

<p class=MsoBodyTextIndent>Тоже вполне допустимая практика, если меняли в
нескольких местах. Она покажет такие ошибки, как неверно закрытые скобки и дважды
определённую в одном файле функцию или переменную. В случае ошибки чтения можно
попробовать в отладчике написать<span class=GramE> <span style='color:blue'>:</span></span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>e</span><span
style='color:blue'> &lt;</span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US'>Enter</span><span style='color:blue'>&gt;</span>, окрестности ошибки
раскрасятся в разные цвета. Также можно щелкать на ворнинги какой-то кнопкой
мыши и, если повезёт, получится увидеть исходник. </p>

<h3><a name="_Toc346328151">Подводные камни динамической разработки и как их
обойти</a></h3>

<p class=MsoBodyTextIndent>Некоторые из них известны в <span lang=EN-US
style='mso-ansi-language:EN-US'>SQL</span>. Только один пример. Мы создали
функцию <span lang=EN-US style='mso-ansi-language:EN-US'>bar</span>, <span
class=GramE>к-рая</span> вызывает функцию <span lang=EN-US style='mso-ansi-language:
EN-US'>foo</span>. Потом решили переименовать функцию <span lang=EN-US
style='mso-ansi-language:EN-US'>foo</span>, взяли её определение, поменяли в
ней имя <span lang=EN-US style='mso-ansi-language:EN-US'>foo</span><span
lang=EN-US> </span>на нормальноеИмя и перекомпилировали, а в функции <span
lang=EN-US style='mso-ansi-language:EN-US'>bar</span> - забыли поменять. Всё хорошо,
но функция <span lang=EN-US style='mso-ansi-language:EN-US'>foo</span><span
lang=EN-US> </span>тоже существует в пространстве имён, и при перекомпиляции
функции <span lang=EN-US style='mso-ansi-language:EN-US'>bar</span><span
lang=EN-US> </span>никто нам не скажет, что она всё ещё ссылается на <span
lang=EN-US style='mso-ansi-language:EN-US'>foo</span>, а не на нормальноеИмя. Проблема
всплывёт только <span class=GramE>при</span> полной пересборке (а это может
быть и через неделю). </p>

<p class=MsoBodyTextIndent>Существует множество других подводных камней
подобного рода, связанных с динамической природой лиспа. </p>

<p class=MsoBodyTextIndent>Не буду объяснять их все, но вот общие рекомендации:
</p>

<p class=MsoBodyTextIndent>1. Макросы, типы данных и глобальные переменные
лучше выделить в отдельный файл, примерно так же, как это делается в <span
lang=EN-US style='mso-ansi-language:EN-US'>C</span>. </p>

<p class=MsoBodyTextIndent>2. Желательно дробить программу на как можно более
мелкие пакеты, для этого нужно пользоваться <span lang=EN-US style='color:blue;
mso-ansi-language:EN-US'>def</span><span style='color:blue'>-</span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>merge</span><span
style='color:blue'>-</span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US'>packages</span><span style='color:blue'>::! </span>, т.к. у <span
lang=EN-US style='mso-ansi-language:EN-US'>defpackage</span><span lang=EN-US> </span>хватает
граблей, связанных с одноимёнными экспортируемыми символами в разных пакетах и
др. </p>

<p class=MsoBodyTextIndent>3. Нужно стараться удалять сущности, которые больше
не нужны. Любая сущность, имя которой есть хотя бы в одном пространстве имён,
пребудет <span class=GramE>во</span> веки веков (до выхода из программы), даже
если на неё нет других ссылок. Поэтому, для удаления сущности нужно удалить её
имя из пространства имён. В целом удаление символа из пространства имён делается
с помощью <span lang=EN-US style='mso-ansi-language:EN-US'>unintern</span>, но
это не сработает, если имя содержится в нескольких пространствах имён или если
оно пришло через наследование пространств имён (:<span lang=EN-US
style='mso-ansi-language:EN-US'>use</span>). Проверяйте результат <span
lang=EN-US style='mso-ansi-language:EN-US'>unintern</span><span lang=EN-US> </span>с
помощью средства поиска символов и не забывайте, что могут быть одноимённые, но
различные символы в разных пакетах. <span style='mso-spacerun:yes'> </span>Идентичность
символов проверяется с помощью <span lang=EN-US style='color:red;mso-ansi-language:
EN-US'>eq</span><span lang=EN-US style='mso-ansi-language:EN-US'>. <o:p></o:p></span></p>

<p class=MsoBodyTextIndent>4. В трудной ситуации можно попробовать удалить (<span
lang=EN-US style='mso-ansi-language:EN-US'>delete</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>package</span>) пространство имён целиком. Сначала
нужно перейти в другое пр-во имён в <span lang=EN-US style='mso-ansi-language:
EN-US'>listener</span>-е и закрыть файлы этого пакета в редакторе, после чего выполнить
<span lang=EN-US style='mso-ansi-language:EN-US'>delete</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>package</span><span lang=EN-US> </span>и
перекомпилировать все файлы фрагмента, начиная с файла определения пакета. Вряд
ли стоит пытаться это делать, если на данный пакет уже ссылаются другие, в этом
случае <span class=GramE>см</span>. следующую рекомендацию. </p>

<p class=MsoBodyTextIndent>5. <span class=GramE>Полная</span> пересборка
системы подразумевает удаление всех <span lang=EN-US style='mso-ansi-language:
EN-US'>ofasl</span><span lang=EN-US> </span>- файлов, созданных при пересборке
(нужно иметь функцию или <span lang=EN-US style='mso-ansi-language:EN-US'>bat</span>-файл,
к-рый это делает) и запускать полную пересборку программы в свежем экземпляре
среды. Иногда <span class=GramE>сборочный</span> скрипт не включает в себя
сборку особо сложных библиотек. Например, автор почти никогда не пересобирает <span
lang=EN-US style='mso-ansi-language:EN-US'>ap</span>5. Соответствующие <span
lang=EN-US style='mso-ansi-language:EN-US'>ofasl</span>-ы нужно сохранить. </p>

<p class=MsoBodyTextIndent>6. <span lang=EN-US style='mso-ansi-language:EN-US'>asdf</span><span
lang=EN-US> </span>работает очень плохо (вроде 2-я версия стала лучше, но точно
не знаю). Не полагайтесь на задание зависимостей внутри системы, используйте в
системе ключ<span class=GramE> :</span><span lang=EN-US style='mso-ansi-language:
EN-US'>serial</span>, а также есть <span lang=EN-US style='color:blue;
mso-ansi-language:EN-US'>asdf</span><span style='color:blue'>::</span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>undefsystem</span> ,
который сбрасывает кеш <span lang=EN-US style='mso-ansi-language:EN-US'>asdf</span><span
lang=EN-US> </span>для данной системы и который всегда лучше вызвать, если
что-то серьёзно поменялось. </p>

<h1><a name="_Toc346453814"></a><a name="_Toc346328152"><span style='mso-bookmark:
_Toc346453814'>Встроенные типы данных</span></a><span style='mso-bookmark:_Toc346453814'></span><span
style='mso-bookmark:_Toc346328152'></span><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></h1>

<h2><a name="_Toc346453815"></a><a name="_Toc346328153"><span style='mso-bookmark:
_Toc346453815'>Символы</span></a></h2>

<p class=MsoNormal>Символ - это структура данных, которая в обычном компиляторе
соответствует идентификатору. В <span lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span>,
символы существуют только во время компиляции и в сессии отладчика. В Лиспе
символ доступен программисту. Символ можно создавать во время исполнения и
включать в пространства имён. У символа есть значение (это - значение
глобальной переменной с таким именем),<span style='mso-spacerun:yes'> 
</span>значение - функция (функция с таким именем), которая может быть изменена
- на этом основана динамическая разработка. Также символ может означать тип,
класс, макрос. К символу можно добавлять свойства, доступ к которым происходит
с помощью <span lang=EN-US style='mso-ansi-language:EN-US'>get</span>. </p>

<h3><a name="_Toc346328154">Регистр символов</a></h3>

<p class=MsoNormal>При чтении, согласно стандарту, имя приводится к верхнему
регистру и печатается в верхнем регистре. Чтобы этого избежать, имя нужно
писать как |<span lang=EN-US style='mso-ansi-language:EN-US'>CamelCase</span>|.
<span style='color:blue'>В<span class=GramE> :</span></span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US'>buddens</span><span
style='color:blue'>-</span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US'>readtable</span><span style='color:blue'>-</span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US'>a</span><span style='color:blue'>, если
у символа есть латинские буквы в различном регистре, например, в имени </span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>CamelCase</span><span
style='color:blue'>, то он не приводится к верхнему регистру. Также настроены
переменные конфигурации чтения таким образом, что имена и вид на печати
символов связаны согласно таблице:<o:p></o:p></span></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:191;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=329 valign=top style='width:246.4pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span style='color:blue'>Вводим<o:p></o:p></span></p>
  </td>
  <td width=329 valign=top style='width:246.45pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span style='color:blue'>На печати<o:p></o:p></span></p>
  </td>
  <td width=329 valign=top style='width:246.45pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span style='color:blue'>Имя
  символа<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=329 valign=top style='width:246.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='color:
  blue;mso-ansi-language:EN-US'>sym<o:p></o:p></span></p>
  </td>
  <td width=329 valign=top style='width:246.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='color:
  blue;mso-ansi-language:EN-US'>sym<o:p></o:p></span></p>
  </td>
  <td width=329 valign=top style='width:246.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='color:
  blue;mso-ansi-language:EN-US'>&quot;SYM&quot;<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=329 valign=top style='width:246.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='color:
  blue;mso-ansi-language:EN-US'>SYM<o:p></o:p></span></p>
  </td>
  <td width=329 valign=top style='width:246.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='color:
  blue;mso-ansi-language:EN-US'>sym<o:p></o:p></span></p>
  </td>
  <td width=329 valign=top style='width:246.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='color:
  blue;mso-ansi-language:EN-US'>&quot;SYM&quot;<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=329 valign=top style='width:246.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='color:
  blue;mso-ansi-language:EN-US'>Sym<o:p></o:p></span></p>
  </td>
  <td width=329 valign=top style='width:246.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='color:
  blue;mso-ansi-language:EN-US'>Sym<o:p></o:p></span></p>
  </td>
  <td width=329 valign=top style='width:246.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='color:
  blue;mso-ansi-language:EN-US'>&quot;Sym&quot;<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4;mso-yfti-lastrow:yes'>
  <td width=329 valign=top style='width:246.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='color:
  blue;mso-ansi-language:EN-US'>|sym|<o:p></o:p></span></p>
  </td>
  <td width=329 valign=top style='width:246.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='color:
  blue;mso-ansi-language:EN-US'>|sym|<o:p></o:p></span></p>
  </td>
  <td width=329 valign=top style='width:246.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='color:
  blue;mso-ansi-language:EN-US'>&quot;sym&quot;<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal>Чтобы узнать имя символа и не запутаться в преобразованиях,
можно использовать<span style='color:blue'> </span>(<span lang=EN-US
style='mso-ansi-language:EN-US'>string</span><span lang=EN-US> </span>символ). </p>

<h2><a name="_Toc346453816"></a><a name="_Toc346328155"><span style='mso-bookmark:
_Toc346453816'>Списки</span></a></h2>

<p class=MsoNormal>Список, как уже ранее отмечалось - это односвязный список,
построенный из объектов типа <span lang=EN-US style='color:red;mso-ansi-language:
EN-US'>cons</span>. В <span lang=EN-US style='mso-ansi-language:EN-US'>cons</span>
два поля - <span lang=EN-US style='color:red;mso-ansi-language:EN-US'>car</span><span
lang=EN-US> </span>и <span lang=EN-US style='color:red;mso-ansi-language:EN-US'>cdr</span>.
<span lang=EN-US style='mso-ansi-language:EN-US'>car</span><span lang=EN-US> </span>указывает
на элемент списка,<span lang=EN-US style='mso-ansi-language:EN-US'>cdr</span> -
на хвост. У последнего элемента <span lang=EN-US style='mso-ansi-language:EN-US'>cdr</span>
= <span lang=EN-US style='mso-ansi-language:EN-US'>nil</span>. Несмотря на то,
что односвязный список далеко не всегда оптимален по быстродействию, его часто
используют для хранения последовательностей объектов, множеств, отображений
(словарей). Список можно примерно считать аналогичным <span lang=EN-US
style='mso-ansi-language:EN-US'>TList</span>, но он гибче, поскольку два списка
могут иметь общий &quot;хвост&quot;. Одинаковый код обработки списков на Лиспе
оказывается гораздо лаконичнее соответствующего кода на Дельфи, поскольку:</p>

<p class=MsoNormal>1. В лиспе можно одним оператором создать и заполнить
вложенный список произвольных значений. </p>

<p class=MsoNormal>2. Легко складывать (конкатенировать) списки, сортировать,
искать по произвольному ключу, удалять сразу много значений, делать выборки, осуществлять
теоретико-множественные операции.</p>

<p class=MsoNormal>3. Не нужно следить за памятью.</p>

<p class=MsoNormal>4. Не нужно создавать специальные типы данных для хранения групп
значений<span style='mso-spacerun:yes'>  </span>- можно использовать вложенные
списки. </p>

<p class=MsoNormal>5. Список объектов, которые имеют внешние текстовое
представление, за одно действие может быть введён/выведен в/из пото<span
class=GramE>к(</span>а). В частности, список всегда легко напечатать и обозреть
его содержимое. </p>

<p class=MsoNormal>Как правило, списки всё же используются для относительно
небольших объёмов данных. </p>

<h2><a name="_Toc346453817"></a><a name="_Toc346328156"><span style='mso-bookmark:
_Toc346453817'>Массивы и строки</span></a></h2>

<p class=MsoNormal>Строки являются одномерными массивами букв. В лиспе есть
одномерные и многомерные массивы. Многие функции, работающие для списков,
работают и для одномерных массивов. Массивы могут быть изменяемого размера.
Принципиальное отличие от списков - в том, что операция добавления и вырезания
элемента в массивах могут быть медленнее, а операция доступа по номеру -
быстрее. Массивы могут быть слабыми, т.е. не <span class=GramE>мешать объекту
подвергнуться</span> сборке мусора, если на него нет других,
&quot;сильных&quot; ссылок. Массивы<span class=GramE>,к</span>ак и списки,
могут быть напечатаны или прочитаны из потока за одно действие. </p>

<h2><a name="_Toc346453818"></a><a name="_Toc346328157"><span style='mso-bookmark:
_Toc346453818'>Хеш-таблицы</span></a></h2>

<p class=MsoNormal>Хеш-таблицы - это эффективная реализация словаря
(отображения). Ключём может быть строка, число или произвольный объект. Ключи
могут сравниваться по идентичности объекта (<span lang=EN-US style='mso-ansi-language:
EN-US'>eq</span>-хеш-таблицы) или по его содержимому (остальные). Хеш-таблица
может быть слабой, т.е. не <span class=GramE>мешать объекту подвергнуться</span>
сборке мусора, если на него нет других, &quot;сильных&quot; ссылок. Используя
объект в качестве слабого ключа в хеш-таблице, можно, по сути, добавить новое
поле к уже существующему объекту, который мы не можем поменять. Например, таким
объектом может быть структура из начинки реализации Лиспа. Хеш-таблицы могут
разделяться между нитями, но их можно создавать и для использования в одной
нити, в этом случае они работают быстрее. </p>

<h2><a name="_Toc346453819"></a><a name="_Toc346328158"><span style='mso-bookmark:
_Toc346453819'>Числа</span></a></h2>

<p class=MsoNormal>Числа бывают целые с произвольной точностью, дроби и с
плавающей точкой. Результат операций над целыми числами является целым или
дробью, для приведения к плавающей точке нужно использовать (<span lang=EN-US
style='mso-ansi-language:EN-US'>coerce</span> 1 '<span lang=EN-US
style='mso-ansi-language:EN-US'>double</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>float</span>). Отличаются <span lang=EN-US
style='mso-ansi-language:EN-US'>single</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>float</span><span lang=EN-US> </span>и <span
lang=EN-US style='mso-ansi-language:EN-US'>double</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>float</span>, это может вызвать путаницу. </p>

<h1><a name="_Toc346453820"></a><a name="_Toc346328159"><span style='mso-bookmark:
_Toc346453820'>Полиморфные (родовые) функции, структуры и классы</span></a></h1>

<h2><a name="_Toc346453821"></a><a name="_Toc346328160"><span style='mso-bookmark:
_Toc346453821'>Родовые функции</span></a></h2>

<p class=MsoNormal>В Дельфи есть виртуальные функции. Такая функция объявляется
в одном (базовом) классе и может перекрываться для его наследников. </p>

<p class=MsoNormal>В зависимости от типа объекта, для которого вызывается
функция, будет реально исполнен разный код. </p>

<p class=MsoNormal>Также в <span lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span>
есть перегруженные (<span lang=EN-US style='mso-ansi-language:EN-US'>overload</span>)
функции, которые исполняются по-разному в зависимости от типов нескольких
аргументов. </p>

<p class=MsoNormal>Но, в отличие от виртуальных функций, выбор той или иной из
набора перегруженных функций определяется типом переменной, а не типом объекта.
Если переменная имеет тип <span lang=EN-US style='mso-ansi-language:EN-US'>TObject</span>,
а хранится в ней <span lang=EN-US style='mso-ansi-language:EN-US'>TComponent</span>,
то будет вызвана перегруженная функция для <span lang=EN-US style='mso-ansi-language:
EN-US'>TObject</span>.</p>

<p class=MsoNormal>В Лиспе также есть полиморфные, или <span style='color:red'>родовые
функции. </span>Они похожи на перегруженные тем, что исполняемый код зависит от
типов всех параметров, и похожи на виртуальные функции тем, что тип параметра
определяется не по типам переменных, а по типам объектов, во время исполнения.
Подобно виртуальным методам <span lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span>,
где можно вызвать <span lang=EN-US style='mso-ansi-language:EN-US'>inherited</span>,
в Лиспе можно вызвать &quot;родительский&quot; метод с помощью <span
lang=EN-US style='mso-ansi-language:EN-US'>(<span style='color:red'>call-next-method</span>).
</span></p>

<p class=MsoNormal>Основное отличие родовой функции от метода <span lang=EN-US
style='mso-ansi-language:EN-US'>Delphi</span><span lang=EN-US> </span>- она не
принадлежит объекту! Т<span lang=EN-US style='mso-ansi-language:EN-US'>.</span>е<span
lang=EN-US style='mso-ansi-language:EN-US'>., </span>вместо<span
style='mso-ansi-language:EN-US'> <span lang=EN-US>object.method(arg1,arg2) </span></span>пишем<span
lang=EN-US style='mso-ansi-language:EN-US'> (method object arg1 arg2). </span>Внутри
определения метода родовой функции нет неявного <span lang=EN-US
style='mso-ansi-language:EN-US'>self</span>, обращаться к полям и методам <span
lang=EN-US style='mso-ansi-language:EN-US'>object</span><span lang=EN-US> </span>нужно
по полному имени с упоминанием <span lang=EN-US style='mso-ansi-language:EN-US'>object</span>.
Это может быть неудобным, но такова наша жизнь.</p>

<p class=MsoNormal>Поскольку код определяется типами нескольких параметров, а
классы имеют множественное наследование, в Лиспе нет однозначного понятия
&quot;родительский&quot;. Реально исполняемый код зависит от типов фактических
параметров по довольно сложному алгоритму. Полное описание алгоритма можно
найти в <span lang=EN-US style='mso-ansi-language:EN-US'><a
href="http://lisper.ru/pcl/object-reorientation-generic-functions">Practical<span
style='mso-ansi-language:RU'> </span>Common<span style='mso-ansi-language:RU'> </span>Lisp</a></span>.
Мы рассмотрим только простые частные случаи. </p>

<h3><a name="_Toc346328161">Основные методы с одним типизированным параметром</a></h3>

<p class=MsoNormal>У методов может быть квалификатор. <span style='color:red'>Основной
метод</span> – это метод, у которого нет квалификатора. Будем для простоты
считать, что для каждого метода функции задан тип только одного аргумента –
первого. Этот случай соответствует не перегруженному виртуальному методу в
Дельфи. Всё работает совершенно аналогично: вызывается метод самого класса или
метод ближайшего предка, а <span lang=EN-US style='mso-ansi-language:EN-US'>call</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>next</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>metod</span> работает так же, как <span
lang=EN-US style='mso-ansi-language:EN-US'>inherited</span>. </p>

<h3><a name="_Toc346328162">Методы со спецификатором </a><span
style='mso-bookmark:_Toc346328162'><span lang=EN-US style='mso-ansi-language:
EN-US'>eql</span></span> </h3>

<p class=MsoNormal>Вместо спецификации типа может быть задан спецификатор <span
lang=EN-US style='mso-ansi-language:EN-US'>sql</span>. Это позволяет определять
метод не для типов, а для индивидуальных объектов. </p>

<h3><a name="_Toc346328163">Методы</a><span style='mso-bookmark:_Toc346328163'><span
lang=EN-US style='mso-ansi-language:EN-US'> before, after, around</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></h3>

<p class=MsoNormal>Можно задать метод с квалификаторами<span class=GramE> :</span><span
lang=EN-US style='mso-ansi-language:EN-US'>before</span>, :<span lang=EN-US
style='mso-ansi-language:EN-US'>after</span>, :<span lang=EN-US
style='mso-ansi-language:EN-US'>around</span>. Методы <span lang=EN-US
style='mso-ansi-language:EN-US'>before</span><span lang=EN-US> </span>и <span
lang=EN-US style='mso-ansi-language:EN-US'>after</span><span lang=EN-US> </span>аналогичны
триггерам <span lang=EN-US style='mso-ansi-language:EN-US'>before</span><span
lang=EN-US> </span>или <span lang=EN-US style='mso-ansi-language:EN-US'>after</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>update</span>.
Методы <span lang=EN-US style='mso-ansi-language:EN-US'>around</span><span
lang=EN-US> </span>охватывают вызов &quot;вокруг&quot;, и позволяют полностью
его подменить. Рассмотрим случай функции с одним типизированным аргументом.
Методы<span class=GramE> :</span><span lang=EN-US style='mso-ansi-language:
EN-US'>around</span> выполняются в порядке от частного – к общему, т.е. от <span
lang=EN-US style='mso-ansi-language:EN-US'>eql</span>, к классу объекта к
предкам. При этом<span class=GramE>,</span> если где-то не вызвать <span
lang=EN-US style='mso-ansi-language:EN-US'>call</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>next</span>-<span lang=EN-US style='mso-ansi-language:
EN-US'>method</span>, то выполнение более &quot;общих&quot; методов (как
обычных, так и <span lang=EN-US style='mso-ansi-language:EN-US'>before</span>,<span
lang=EN-US style='mso-ansi-language:EN-US'>after</span>,<span lang=EN-US
style='mso-ansi-language:EN-US'>around</span>) не будет происходить. </p>

<p class=MsoNormal>Методы<span class=GramE> :</span><span lang=EN-US
style='mso-ansi-language:EN-US'>before</span> аналогичны триггеру <span
lang=EN-US style='mso-ansi-language:EN-US'>before</span><span lang=EN-US> </span><span
lang=EN-US style='mso-ansi-language:EN-US'>update</span>, они выполняются в
порядке от частного к общему, изнутри вызова <span lang=EN-US style='mso-ansi-language:
EN-US'>around</span>, но до вызова &quot;основных&quot; методов, <span
lang=EN-US style='mso-ansi-language:EN-US'>call</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>next</span>-<span lang=EN-US style='mso-ansi-language:
EN-US'>method</span> вызывать не нужно. Методы<span class=GramE> :</span><span
lang=EN-US style='mso-ansi-language:EN-US'>after</span> выполняются после
основных, внутри <span lang=EN-US style='mso-ansi-language:EN-US'>around</span>,
в порядке от частного к общему. </p>

<h2><a name="_Toc346453822"></a><a name="_Toc346328165"><span style='mso-bookmark:
_Toc346453822'>Структуры</span></a></h2>

<p class=MsoNormal>Структура по своим возможностям примерно соответствует
классу в <span lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span>, если
не считать свойств (<span lang=EN-US style='mso-ansi-language:EN-US'>properties</span>)
и ограничения доступа - этого в Лиспе нет. Пример определения структуры с тремя
полями:</p>

<p class=a><span style='mso-ansi-language:RU'>(</span><span lang=EN-US>defstruct</span><span
lang=EN-US style='mso-ansi-language:RU'> </span><span lang=EN-US>мояСтруктура
поле<span class=GramE>1</span> поле2 поле3) </span></p>

<p class=MsoNormal>Для такой структуры будет автоматически сгенерирован
конструктор <span lang=EN-US style='mso-ansi-language:EN-US'>make</span>-мояСтруктура
и три функции для доступа к полям, мояСтруктура-поле1,2,3 от одного аргумента.</p>

<p class=MsoNormal>Можно задавать для структур типы полей.</p>

<p class=MsoNormal>Каждая структура является классом. Структура может
&quot;включать&quot; в себя другую структуру (родитель) с помощью опции<span
class=GramE> :</span><span lang=EN-US style='mso-ansi-language:EN-US'>include</span>,
(см. помощь для <span lang=EN-US style='mso-ansi-language:EN-US'>defstruct</span>),
тогда она становится подклассом родителя в иерархии классов. Поскольку для
структур можно определять родовые функции, можно сделать вывод, что
структуры+родовые функции примерно соответствуют классам Дельфи. </p>

<h3><a name="_Toc346328166">Конструктор</a></h3>

<p class=MsoNormal>Структура пассивна, это - просто набор данных. У неё нет
конструктора, его нужно эмулировать вызовом какой-то функции, написанной
пользователем. </p>

<h3><a name="_Toc346328167">Деструктор</a></h3>

<p class=MsoNormal>Деструкторы в лиспе вообще не водятся. Хотя можно назначить
действие на сборку мусора, (<span lang=EN-US style='mso-ansi-language:EN-US'>hcl</span>:add<a
name=marker-1038990></a>-special-free-action), но неизвестно, когда это
действие будет осуществлено, и возможности этого действия весьма ограничены,
т.к. оно вызывается в очень специфических условиях. <span class=GramE>Поэтому,
если объект должен быть явно «удалён», например, закрыт поток, нужно добавить в
объект поле, характеризующее его состояние, в деструкторе закрывать то, что
надо, затем ставить в поле состояния признак, что объект «убит» и особым
образом обрабатывать такие «убитые» объекты.</span> Действие при сборке мусора,
<span class=GramE>по хорошему</span>, должно лишь проверять, что объект при
сборке мусора был закрыт должным образом, и сообщать об ошибочной ситуации,
если что-то не так.</p>

<h3><a name="_Toc346328168"><span style='color:blue'>Крышечный синтаксис</span></a><span
style='color:blue'><o:p></o:p></span></h3>

<p class=MsoNormal><span style='mso-fareast-language:ZH-CN'>Стандарт Лиспа
подразумевает довольно многословный синтаксис обращения к полям структуры. <span
style='color:blue'>Крышечный синтаксис </span>позволяет сделать обращения к полям
структур почти столь же лаконичными, как в </span><span lang=EN-US
style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>Delphi</span><span
style='mso-fareast-language:ZH-CN'>. Однако<span class=GramE>,</span> это будет
работать только для цепочек типа </span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>a</span><span style='mso-fareast-language:
ZH-CN'>.</span><span lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>b</span><span style='mso-fareast-language:ZH-CN'>.</span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>c</span><span
lang=EN-US style='mso-fareast-language:ZH-CN'> </span><span style='mso-fareast-language:
ZH-CN'>и не будет работать для </span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>a</span><span style='mso-fareast-language:
ZH-CN'>.</span><span lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>b</span><span style='mso-fareast-language:ZH-CN'>(</span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>args</span><span
style='mso-fareast-language:ZH-CN'>).</span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>c</span><span style='mso-fareast-language:
ZH-CN'>. Пример <span class=GramE>см</span>. в пункте про управляющие
конструкции.<o:p></o:p></span></p>

<h3><a name="_Toc346328169">Ложка дёгтя</a></h3>

<p class=MsoNormal>При переопределении структуры все её экземпляры становятся
инвалидными. </p>

<h2><a name="_Toc346453823"></a><a name="_Toc346328170"><span style='mso-bookmark:
_Toc346453823'>Классы</span></a></h2>

<p class=MsoNormal>Классами автор пользуется мало. Основное их преимущество
перед структурами – их можно переопределять «на лету», так, что все экземпляры
сохраняются. Для классов доступно множественное наследование, могут быть
определены конструкторы. Для классов функция <span
style='mso-spacerun:yes'> </span>печати по умолчанию очень убогая, нужно
пользоваться инспектором или писать нужную функцию. Недостатком классов можно
считать то, что родовые функции являются аналогом виртуальных, что сказывается
на производительности. Впрочем, ничто не мешает написать обычную функцию,
оперирующую над экземплярами классов - это будет аналогично статическим
методам. Синтаксис определения класса могуч и многословен. Повторюсь, родовые
функции можно определять не только над классами, но и над структурами и
встроенными типами, так что без классов можно обходиться в большом количестве
случаев. </p>

<p class=MsoNormal>Принять решение о том, использовать класс или структуру, в
основном, нужно принимать, исходя из сложности, необходимости динамического
изменения определения и требований к скорости. Если Ваш тип сложен или его надо
часто менять - используйте класс. Если тип просто и меняется не часто, или если
скорость критична - используйте структуры. </p>

<h3><a name="_Toc346328171">Проблема именования полей и методов</a></h3>

<p class=MsoNormal><span style='mso-fareast-language:ZH-CN'>В </span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>Delphi</span><span
style='mso-fareast-language:ZH-CN'> каждый класс фактически определяет
пространство имён. Если два класса отличны, то, </span><span lang=EN-US
style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>T</span><span
style='mso-fareast-language:ZH-CN'>1.</span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>func</span><span style='mso-fareast-language:
ZH-CN'>() и </span><span lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>T</span><span style='mso-fareast-language:ZH-CN'>2.</span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>func</span><span
style='mso-fareast-language:ZH-CN'>() - тоже отличны. В лиспе это - не так.
Пространства имён ортогональны иерархии классов. Отсюда возникает вопрос, как
назвать </span><span lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>func</span><span style='mso-fareast-language:ZH-CN'> в Лиспе? Её можно
назвать </span><span lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>T</span><span style='mso-fareast-language:ZH-CN'>1-</span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>func</span><span
style='mso-fareast-language:ZH-CN'>, но тогда при доступе всегда нужно будет
писать имя типа - это неудобно. Кроме того, если у </span><span lang=EN-US
style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>T</span><span
style='mso-fareast-language:ZH-CN'>1 появится потомок </span><span lang=EN-US
style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>T</span><span
style='mso-fareast-language:ZH-CN'>1</span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>Child</span><span style='mso-fareast-language:
ZH-CN'>, нужно <span class=GramE>будет</span> либо писать новую функцию </span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>T</span><span
style='mso-fareast-language:ZH-CN'>1</span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>Child</span><span style='mso-fareast-language:
ZH-CN'>-</span><span lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>member</span><span style='mso-fareast-language:ZH-CN'>, либо писать (</span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>T</span><span
style='mso-fareast-language:ZH-CN'>1-</span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>member</span><span lang=EN-US
style='mso-fareast-language:ZH-CN'> </span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>instance</span><span style='mso-fareast-language:
ZH-CN'>), где </span><span lang=EN-US style='mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>instance</span><span lang=EN-US style='mso-fareast-language:
ZH-CN'> </span><span style='mso-fareast-language:ZH-CN'>будет типа </span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>T</span><span
style='mso-fareast-language:ZH-CN'>1</span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>Child</span><span style='mso-fareast-language:
ZH-CN'>, что тоже ведёт к путанице. Приходится учитывать эту особенность <span
class=GramE>при</span> и особенно тяжело здесь приходится с самыми
распространёнными словами, такими, как </span><span lang=EN-US
style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>add</span><span
style='mso-fareast-language:ZH-CN'>,</span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>push</span><span lang=EN-US style='mso-fareast-language:
ZH-CN'> </span><span style='mso-fareast-language:ZH-CN'>и т.п. Один из
вариантов решения - создавать иерархии пространств имён, связанные с иерархиями
классов. В любом случае, в среднем, получается более многословно, чем в </span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>Delphi</span><span
style='mso-fareast-language:ZH-CN'> и с этим надо смириться. <o:p></o:p></span></p>

<p class=MsoNormal><span style='color:blue;mso-fareast-language:ZH-CN'>В случае
структур ситуация упрощается, (только для полей). Если в стурктуре </span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>T</span><span
style='color:blue;mso-fareast-language:ZH-CN'>1 есть поле </span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>fld</span><span
style='color:blue;mso-fareast-language:ZH-CN'>, автоматически создаётся функция
доступа </span><span lang=EN-US style='color:blue;mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>T</span><span style='color:blue;mso-fareast-language:
ZH-CN'>1-</span><span lang=EN-US style='color:blue;mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>fld</span><span style='color:blue;mso-fareast-language:
ZH-CN'>. Если создаётся наследник </span><span lang=EN-US style='color:blue;
mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>T</span><span
style='color:blue;mso-fareast-language:ZH-CN'>1</span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>Child</span><span
style='color:blue;mso-fareast-language:ZH-CN'>, то к полю </span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>fld</span><span
lang=EN-US style='color:blue;mso-fareast-language:ZH-CN'> </span><span
style='color:blue;mso-fareast-language:ZH-CN'>наследника можно обращаться и
через </span><span lang=EN-US style='color:blue;mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>T</span><span style='color:blue;mso-fareast-language:
ZH-CN'>1-</span><span lang=EN-US style='color:blue;mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>fld</span><span style='color:blue;mso-fareast-language:
ZH-CN'>, и через </span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>T</span><span style='color:blue;mso-fareast-language:
ZH-CN'>1</span><span lang=EN-US style='color:blue;mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>Child</span><span style='color:blue;mso-fareast-language:
ZH-CN'>-</span><span lang=EN-US style='color:blue;mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>fld</span><span style='color:blue;mso-fareast-language:
ZH-CN'>. Крышечный синтаксис позволяет обращаться к полям структур почти так же
лаконично, как в </span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>Delphi</span><span style='color:blue;
mso-fareast-language:ZH-CN'>: </span><span lang=EN-US style='color:blue;
mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>instance</span><span
style='color:blue;mso-fareast-language:ZH-CN'>^</span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>fld</span><span
style='color:blue;mso-fareast-language:ZH-CN'>, где </span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>instance</span><span
lang=EN-US style='color:blue;mso-fareast-language:ZH-CN'> </span><span
style='color:blue;mso-fareast-language:ZH-CN'>может быть </span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>T</span><span
style='color:blue;mso-fareast-language:ZH-CN'>1 или </span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>T</span><span
style='color:blue;mso-fareast-language:ZH-CN'>1</span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>Child</span><span
style='color:blue;mso-fareast-language:ZH-CN'>. Для достижения хорошей
производительности тип переменной должен быть введён конструкцией </span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>with</span><span
style='color:blue;mso-fareast-language:ZH-CN'>-</span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>the</span><span
style='color:blue;mso-fareast-language:ZH-CN'>1. </span><span style='color:
navy;mso-fareast-language:ZH-CN'><o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-fareast-language:ZH-CN'><o:p>&nbsp;</o:p></span></p>

<h3><a name="_Toc346328172">Пример реализац</a><span class=GramE><span
style='mso-bookmark:_Toc346328172'>ии ие</span></span><span style='mso-bookmark:
_Toc346328172'>рархии классов на структурах (НЕ ПРОВЕРЕНО!)</span></h3>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid windowtext;
 mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;mso-yfti-lastrow:yes'>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>unit relatives; <o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>type TFather=class<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>s:string; // (</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>в</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
  mso-ansi-language:EN-US'> </span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New"'>лиспе</span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>
  </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
  "Courier New"'>всё</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'> - public)<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>constructor Init; <o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>procedure SetString(iS:string)<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>function getString:string;
  virtual; <o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>end;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>type TChild=class(TFather)<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>function getString:string;
  override;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><span style='mso-spacerun:yes'>  </span>end;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>implementation<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>procedure TFather.setString(iS:string);<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>{ </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  font-family:"Courier New"'>статический метод</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
  mso-ansi-language:EN-US'>}<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>begin<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>s:=iS;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>end;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>function TFather.getString:string; <o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>begin<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>result:=s;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>end;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>function TChild.getString:string; <o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>begin<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>result:=s+s;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>end;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span class=GramE><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
  "Courier New";mso-ansi-language:EN-US'>end</span></span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
  mso-ansi-language:EN-US'>.<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>&lt;EOF&gt;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>unit relativesApp;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>uses relatives; <o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>var f:TFather;ch:TChild;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>begin<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>f:=TFather.Create;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>ch:=TFather.Create;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>f.s;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>ch.s;<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>f</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  font-family:"Courier New"'>.</span><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:EN-US'>setString</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>('</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
  "Courier New";mso-ansi-language:EN-US'>abc</span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;font-family:"Courier New"'>'); // вызов
  статического метода<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>ch.setString('abc'); </span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New"'><o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>f.getString; // </span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;font-family:"Courier New"'>вызов виртуального метода<o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-ansi-language:
  EN-US'>ch.getString; <o:p></o:p></span></p>
  <p class=MsoNormal style='text-indent:0cm'><span class=GramE><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
  "Courier New";mso-ansi-language:EN-US'>end</span></span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
  mso-ansi-language:EN-US'>.<o:p></o:p></span></p>
  </td>
  <td width=493 valign=top style='width:369.65pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";color:blue'>; </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue;mso-ansi-language:RU'>файл</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue'> relatives/package.lisp </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue;mso-ansi-language:RU'>весь</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue'> </span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";color:blue;mso-ansi-language:RU'>пример</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue'> - </span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";color:blue;mso-ansi-language:RU'>синий</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue'><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(def-merge-packages::!
  :relatives<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(:use :cl :budden-tools)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(:export &quot;relatives:TFather<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>   </span></span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>relatives</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>:</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>TFather</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>-</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>P</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'> </span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'><span style='mso-spacerun:yes'>   </span>; всё это надо прописать<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>   </span></span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>relatives:make-TFather
  ; </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>руками</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>   </span></span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>relatives</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>:</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>TFather</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>-</span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>S</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'><span style='mso-spacerun:yes'>    </span>;
  хотя можно автоматизировать<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>   </span></span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>relatives:TFather-Init<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>   </span>relatives:TFather-SetString<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>   </span>relatives:GetString<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>   </span>relatives:TChild<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>   </span>relatives:make-TChild<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>   </span>relatives:TChild-P<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>   </span>relatives:TChild-S<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'> </span><span style='mso-spacerun:yes'> 
  </span>&quot;<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'> </span><span
  style='mso-spacerun:yes'> </span>(:custom-token-parsers
  budden-tools::convert-carat-to-^)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>   </span>)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>&lt;EOF&gt;<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";color:blue'>;; </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue;mso-ansi-language:RU'>файл</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue'> relatives/vars-and-macros.lisp<span
  style='mso-spacerun:yes'>   </span><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(in-package
  :relatives)(in-readtable :buddens-readtable-a)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>; </span><span
  class=GramE><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>реализация</span></span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>на</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>структурах</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>. <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(defstruct TFather
  <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>S)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>; статический
  метод имитируем обычной функцией. <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>; объявляется
  1 раз на иерархию</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>(</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>defgeneric</span><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'> </span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho"'>GetString</span><span style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";
  mso-ansi-language:RU'> (</span><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>self</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>)) <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>(</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>defstruct (TChild </span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:
  RU'>(:</span><span lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho"'>include</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'> </span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>TFather</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>)))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>&lt;</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>EOF</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>&gt;</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";color:blue'>;; </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue;mso-ansi-language:RU'>файл</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue'> relatives/implementation.lisp<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(in-package
  :relatives)(in-readtable :buddens-readtable-a)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(defun TFather-SetString
  (self iS) ; </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>статический</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> &quot;</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>метод</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>&quot;<span style='mso-spacerun:yes'>   </span><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>             </span>; изображаем обычной функцией и
  даём имя<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>       </span><span
  style='mso-spacerun:yes'>      </span>; класса, где он определён.<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><span
  style='mso-spacerun:yes'>   </span></span><span lang=EN-US style='font-size:
  10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(proga<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>     </span>(with-the1 self TFather self)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>     </span>(setf self^S iS) ; </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>проверки</span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'> </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>типа</span><span style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'> </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";mso-ansi-language:RU'>нет</span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>     </span>))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(defmethod
  GetString ((self TFather))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(self^S)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(defmethod
  GetString ((self TChild))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(str++ self^S self^S)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>&lt;EOF&gt;<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho";color:blue'>;; </span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue;mso-ansi-language:RU'>файл </span><span lang=EN-US
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho";color:blue'>relatives-app.lisp<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(def-merge-packages::!
  :relatives-app<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>(:use :cl :budden-tools :relatives-app)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'> </span><span
  style='mso-spacerun:yes'> </span>(:custom-token-parsers
  budden-tools::convert-carat-to-^)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><span
  style='mso-spacerun:yes'>  </span>)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(in-package
  :relatives-app)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(in-readtable
  :buddens-readtable-a)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>(</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>defparameter</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> *</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>f</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>* </span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>nil</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>))<span
  class=GramE> ;</span> глоб. переменные не типизированы<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(defparameter
  *ch* nil)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(setf *f*
  (TFather-Init (make-TFather)))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(setf *ch*
  (TFather-Init (make-TFather)))<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>(</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>print</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> *</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>f</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>*^</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>S</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>)<span class=GramE>
  ;</span> неэффективно, т.к. не типиз. переменная. <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>;
  Эквивалентный эффективный вариант <o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>; (with-the1 f
  TFather *f* f^S) </span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>или</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> </span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>просто</span><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'> <span lang=EN-US>(TFather-S *f*)<o:p></o:p></span></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(print *ch*^S)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(TFather-SetString
  *f* &quot;abc&quot;)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>(</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>TFather</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>-</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>SetString</span><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'> *</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>ch</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>* &quot;</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>abc</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
  mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>&quot;) <span
  style='mso-spacerun:yes'> </span><o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'><o:p>&nbsp;</o:p></span></p>
  <p class=a style='text-indent:0cm'><span style='font-size:10.0pt;mso-bidi-font-size:
  12.0pt;mso-fareast-font-family:"MS Mincho";mso-ansi-language:RU'>(</span><span
  lang=EN-US style='font-size:10.0pt;mso-bidi-font-size:12.0pt;mso-fareast-font-family:
  "MS Mincho"'>GetString *f*)<o:p></o:p></span></p>
  <p class=a style='text-indent:0cm'><span lang=EN-US style='font-size:10.0pt;
  mso-bidi-font-size:12.0pt;mso-fareast-font-family:"MS Mincho"'>(GetString
  *ch*) <o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<h1><a name="_Toc346453824"></a><a name="_Toc346328173"><span style='mso-bookmark:
_Toc346453824'></span></a><span class=GramE><span style='mso-bookmark:_Toc346328173'><span
style='mso-bookmark:_Toc346453824'><span lang=EN-US style='mso-ansi-language:
EN-US'>eval</span></span></span></span><span style='mso-bookmark:_Toc346328173'><span
style='mso-bookmark:_Toc346453824'><span lang=EN-US> </span>и макросы</span></span></h1>

<h2><a name="_Toc346453825"></a><a name="_Toc346328174"><span style='mso-bookmark:
_Toc346453825'><span lang=EN-US style='mso-ansi-language:EN-US'>Eval</span></span></a></h2>

<p class=MsoNormal><span class=GramE><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>Eval</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho"'> </span><span style='mso-fareast-font-family:
"MS Mincho"'>предназначен для динамической генерации и выполнения кода во время
выполнения программы.</span></span><span style='mso-fareast-font-family:"MS Mincho"'>
Он аналогичен командам </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>SQL</span><span style='mso-fareast-font-family:
"MS Mincho"'>: </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>execute</span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho"'> </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>statement</span><span style='mso-fareast-font-family:
"MS Mincho"'>, </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>exec</span><span style='mso-fareast-font-family:"MS Mincho"'>,
</span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:
EN-US'>sp</span><span style='mso-fareast-font-family:"MS Mincho"'>_</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>execute</span><span
style='mso-fareast-font-family:"MS Mincho"'>_</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>sql</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>и т.п. Общий смысл - код <span
class=GramE>составляется</span> и выполнятся во время выполнения. Разница между
</span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:
EN-US'>SQL</span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>и Лиспом состоит в том, что в </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>SQL</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>складывются строки, а в </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>Lisp</span><span
style='mso-fareast-font-family:"MS Mincho"'> происходит обработка деревьев. При
этом часто используется <span style='color:red'>квазицитирование</span>. <o:p></o:p></span></p>

<p class=MsoNormal><span class=GramE><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>Eval</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho"'> </span><span style='mso-fareast-font-family:
"MS Mincho"'>снижает производительность и делает программу менее надёжной,
поэтому его можно использовать только там, где это необходимо.</span></span><span
style='mso-fareast-font-family:"MS Mincho"'> Однако<span class=GramE>,</span>
листенер основан именно на </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";color:red;mso-ansi-language:EN-US'>eval</span><span
style='mso-fareast-font-family:"MS Mincho"'> - он вызывает </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>eval</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>над формами, которые мы вводим. <o:p></o:p></span></p>

<h2><a name="_Toc346453826"></a><a name="_Toc346328175"><span style='mso-bookmark:
_Toc346453826'><span style='mso-fareast-font-family:"MS Mincho"'>Макросы</span></span></a><span
style='mso-fareast-font-family:"MS Mincho"'><o:p></o:p></span></h2>

<p class=MsoNormal><span style='mso-fareast-font-family:"MS Mincho";color:red'>Макросы</span><span
style='mso-fareast-font-family:"MS Mincho"'> аналогичны директивам
препроцессора #</span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>define</span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho"'> </span><span style='mso-fareast-font-family:"MS Mincho"'>в </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>C</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>и в то же время аналогичны </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>eval</span><span
style='mso-fareast-font-family:"MS Mincho"'>. Отличие от #</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>define</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>состоит в том, что для #</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>define</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>доступны 3-4 операции
(арифметические действия над константами, вызов других макросов и две
конкатенации). Макрос на лиспе может проводить любой анализ входных данных
(своих аргументов), вызывать любые уже присутствующие в образе функции и
строить подставляемый код из результата их вызова. Всё это обычно может в
интерпретируемых языках </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>eval</span><span style='mso-fareast-font-family:
"MS Mincho"'> (</span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>execute</span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho"'> </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>statement</span><span style='mso-fareast-font-family:
"MS Mincho"'>). Отличие макросов от </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>eval</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho"'> </span><span style='mso-fareast-font-family:
"MS Mincho"'>состоит в том, что расширение и подстановка макросов обычно происходит
на этапе компиляции, поэтому макросы не замедляют выполнение программы. <o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-fareast-font-family:"MS Mincho"'>При
определении макросов обычно используется <span style='color:red'>квазицитирование</span>.
Пример макроса приведён в пункте <span style='mso-field-code:" REF _Ref346327512 \\h "'><span
lang=EN-US style='mso-ansi-language:EN-US'>try</span>..<span lang=EN-US
style='mso-ansi-language:EN-US'>finally</span><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F005200650066003300340036003300320037003500310032000000</w:data>
</xml><![endif]--></span>.<o:p></o:p></span></p>

<h3><a name="_Toc346328177"><span style='mso-fareast-font-family:"MS Mincho"'>Преимущества
и недостатки<o:p></o:p></span></a></h3>

<p class=MsoNormal><span style='mso-bookmark:_Toc346328177'><span
style='mso-fareast-font-family:"MS Mincho"'>Преимущество - возможность создания
новых конструкций языка с неограниченными возможностями. Например, препроцессор
</span></span><span style='mso-bookmark:_Toc346328177'><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>SQL</span></span><span
style='mso-bookmark:_Toc346328177'><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho"'> </span></span><span style='mso-bookmark:_Toc346328177'><span
style='mso-fareast-font-family:"MS Mincho"'>с поиском ошибок во время компиляции,
о котором говорилось выше. Недостаток - </span></span><span style='mso-fareast-font-family:
"MS Mincho"'>макросы затрудняют или делают невозможной пошаговую отладку.
Степпер предлагает расширять макросы, когда он их встречает, но поствить
брекпойнт в нерасширенный макрос не всегда можно. Иногда нелегко найти и ошибку
в исходном тексте, полученном в резлультате макрорасширения (для этого нужно
использовать </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
color:red;mso-ansi-language:EN-US'>macroexpand</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";color:red'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>или трассировать макрос). <o:p></o:p></span></p>

<h1><a name="_Toc346453827"></a><a name="_Toc346328178"><span style='mso-bookmark:
_Toc346453827'>Отладка</span></a></h1>

<h2><a name="_Toc346453828"></a><a name="_Toc346328179"><span style='mso-bookmark:
_Toc346453828'>Три отладчика</span></a><span style='mso-bookmark:_Toc346453828'>:
консольный, жук и степпер</span></h2>

<p class=MsoNormal style='text-indent:18.0pt'>Консольный и графический отладчик
работают координированно над одним и тем же стеком, эта пара является основным
средством интерактивной отладки. Степпер используется довольно редко.<span
style='mso-spacerun:yes'>  </span>Часто применяется логгирование как полезное
средство отладки. </p>

<h2><a name="_Toc346328180"></a><a name="_Toc346453829"><span style='mso-bookmark:
_Toc346328180'>Для отладки поместите код в файл</span></a><span
style='mso-bookmark:_Toc346328180'></span></h2>

<p class=MsoNormal><span style='mso-bookmark:_Toc346328180'><span
style='mso-fareast-language:ZH-CN'>Лисп позволяет определять и компилировать
функции прямо в листенере. Одна из основных функций отладчика - показать место
в исходнике, где случилась ошибка. Для этого функция должна быть определена в
файле, а файл - скомпилирован и загружен (например, с помощью команды меню </span></span><span
style='mso-bookmark:_Toc346328180'><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>File</span></span><span style='mso-bookmark:
_Toc346328180'><span style='mso-fareast-language:ZH-CN'>/</span></span><span
style='mso-bookmark:_Toc346328180'><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>Compile</span></span><span style='mso-bookmark:
_Toc346328180'><span lang=EN-US style='mso-fareast-language:ZH-CN'> </span></span><span
style='mso-bookmark:_Toc346328180'><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>and</span></span><span style='mso-bookmark:
_Toc346328180'><span lang=EN-US style='mso-fareast-language:ZH-CN'> </span></span><span
style='mso-bookmark:_Toc346328180'><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>load</span></span><span style='mso-bookmark:
_Toc346328180'><span style='mso-fareast-language:ZH-CN'>). Если в процессе
отладки в код вносятся правки, действуйте согласно главе &quot;Динамическая
разработка, основные сценарии&quot;. <span style='mso-spacerun:yes'> </span><o:p></o:p></span></span></p>

<h2><span style='mso-bookmark:_Toc346328180'><a name="_Toc346453830">Изучение
состояния программы</a></span><span style='mso-bookmark:_Toc346453830'> в
отладчике</span></h2>

<h3><a name="_Toc346328181">Просмотр стека. Настройка отображения кадров стека</a></h3>

<p class=MsoBodyTextIndent>Можно просматривть стек и переменные в нём. Для переменных
можно вызывать инспектор. Также можно просматривать в инспекторе функцию, в
которой произошёл останов, с помощью пункта <span lang=EN-US style='mso-ansi-language:
EN-US'>inspect</span><span lang=EN-US> </span><span lang=EN-US
style='mso-ansi-language:EN-US'>function</span>, в т.ч. её ассемблерный
листинг. В меню &quot;<span lang=EN-US style='mso-ansi-language:EN-US'>view</span>&quot;
жука можно выбрать отображение тех или иных кадров стека. По умолчанию отладчик
показывает лишь небольшую часть из них. </p>

<h3><a name="_Toc346328182">Инспектор</a></h3>

<p class=MsoBodyTextIndent>Инспектор аналогичен инспектору в <span lang=EN-US
style='mso-ansi-language:EN-US'>Delphi</span> - он позволяет ходить по
внутренней структуре объекта. </p>

<p class=MsoBodyTextIndent>В нормальных условиях инспектор вызывается нажатием
иконки с микроскопом в листенере. В этом случае он показывает содержимое
последнего результата вычисления. В графическом отладчике - &quot;жуке&quot;
инспектор вызывается при двойном щелчке нажатии на любую переменную стека. Для
возврата на предыдущий уровень структуры есть кнопка &quot;назад&quot;, как в
веб-браузере. </p>

<h2><a name="_Toc346453831"></a><a name="_Toc346328183"><span style='mso-bookmark:
_Toc346453831'>Листенер во время отладки</span></a></h2>

<p class=MsoBodyTextIndent>В любое время, листенер позволяет вызывать функции и
вычислять значения глобальных переменных. Если Вы находитесь в отладчике (<span
class=GramE>см</span>. &quot;Отладчик очень близко&quot;), то листенер
позволяет делать вычисления в контексте текущего кадра стека. Это аналогично
окну <span lang=EN-US style='mso-ansi-language:EN-US'>Evaluate</span>/<span
lang=EN-US style='mso-ansi-language:EN-US'>Modify</span><span lang=EN-US> </span>в
отладчике <span lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span>, но
без присущих <span lang=EN-US style='mso-ansi-language:EN-US'>Delphi</span><span
lang=EN-US> </span>ограничений. Например, можно в отладчике определить новую
функцию. Если в графическом отладчике (&quot;жуке&quot;) Вы выделили одинарным
щелчком другой кадр стека, то <span class=GramE>будут видны переменные этого
кадра и над ними можно</span> будет делать вычисления. Но пространство имён при
этом не переключается, поэтому может понадобиться писать префикс пространства
имён перед пакетом. </p>

<p class=MsoBodyTextIndent>При пошаговом исполнении листенер тоже доступен, но
он какой-то странный и автор им почти не пользуется. Например, неясно, каков
текущий пакет. Научите. </p>

<h2><a name="_Toc346453832"></a><a name="_Toc346328184"><span style='mso-bookmark:
_Toc346453832'>Разновидности ошибок и их локализация</span></a></h2>

<p class=MsoBodyTextIndent>В Дельфи бывает два вида ошибок по времени их
возникновения - ошибки компиляции и ошибки исполнения. В <span lang=EN-US
style='mso-ansi-language:EN-US'>CL</span> жизненный цикл программы устроен
гораздо сложнее, <span class=GramE>поэтому перечислим</span> эти виды и способы
их локализации. Напомним порядок обработки каждого файла программы:
чтение-компиляция-загрузка компилированного кода-выполнение, причём эти фазы
могут происходить в разных образах <span class=GramE>Лисп-системы</span>. </p>

<h3><a name="_Toc346328185">Ошибки чтения</a></h3>

<p class=MsoBodyTextIndent>Они возникают в функции <span lang=EN-US
style='mso-ansi-language:EN-US'>read</span>. Соответственно, если среда говорит
об ошибке и неглубоко по <span class=GramE>стеку</span> Вы видите функцию <span
lang=EN-US style='mso-ansi-language:EN-US'>read</span>, то это - ошибка чтения.
В кадре стека ошибки есть переменная <span lang=EN-US style='mso-ansi-language:
EN-US'>system</span>::<span lang=EN-US style='mso-ansi-language:EN-US'>eargs</span>,
и в ней есть поток. Инспектируя поток, можно понять имя файла. Делая <span
lang=EN-US style='mso-ansi-language:EN-US'>read</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>line</span> этому потоку, можно попробовать
прочитать продолжение файла после места ошибки. <span lang=EN-US
style='color:blue;mso-ansi-language:EN-US'>editor</span><span style='color:
blue'>-</span><span lang=EN-US style='color:blue;mso-ansi-language:EN-US'>budden</span><span
style='color:blue'>-</span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US'>tools</span><span style='color:blue'>::</span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US'>edit</span><span style='color:blue'>-</span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>stream</span><span
style='color:blue'>-</span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US'>position</span><span lang=EN-US style='color:blue'> </span><span
style='color:blue'>открывает файл в том месте, где чтение прервалось. С
таблицей чтения </span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US'>buddens</span><span style='color:blue'>-</span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US'>readtable</span><span
style='color:blue'>-</span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US'>a</span><span lang=EN-US style='color:blue'> </span><span
style='color:blue'>можно использовать в отладчике команду<span class=GramE> :</span></span><span
lang=EN-US style='color:blue;mso-ansi-language:EN-US'>e</span><span lang=EN-US
style='color:blue'> </span><span style='color:blue'>для вызова специального
просмотровщика ошибок чтения, к-рый раскрасит файл в цвета по уровням
вложенности. </span>Также можно заполнить файл отладочным выводом: #.(<span
lang=EN-US style='mso-ansi-language:EN-US'>print</span> &quot;уникальная
метка&quot;) и методом половинного деления найти место, в котором случилась
ошибка. </p>

<h3><a name="_Toc346328186">Ошибки компиляции</a></h3>

<p class=MsoNormal>Во многих случаях среда (в консоли) предлагает <span
lang=EN-US style='mso-ansi-language:EN-US'>edit</span><span lang=EN-US> </span><span
lang=EN-US style='mso-ansi-language:EN-US'>source</span><span lang=EN-US> </span><span
lang=EN-US style='mso-ansi-language:EN-US'>where</span><span lang=EN-US> </span><span
lang=EN-US style='mso-ansi-language:EN-US'>error</span><span lang=EN-US> </span><span
lang=EN-US style='mso-ansi-language:EN-US'>occured</span>. Также можно
установить переменную *<span lang=EN-US style='mso-ansi-language:EN-US'>compile</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>print</span>* в <span lang=EN-US
style='mso-ansi-language:EN-US'>t</span>,но это не поможет, если в файле много
форм, являющихся макросами, определёнными пользователем. В этом случае, вместо
имени функции, среда напечатает &quot;(<span lang=EN-US style='mso-ansi-language:
EN-US'>top</span>-<span lang=EN-US style='mso-ansi-language:EN-US'>level</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>form</span><span lang=EN-US> </span><span
lang=EN-US style='mso-ansi-language:EN-US'>NNN</span>)&quot;. Можно попробовать
установить трассировку на <span lang=EN-US style='mso-ansi-language:EN-US'>compiler</span>::<span
lang=EN-US style='mso-ansi-language:EN-US'>process</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>form</span>. Самый общий способ основан на
отладочном выводе: локализуйте ошибку, расставляя в файле формы верхнего уровня
(eval-when (:compile-toplevel) (print &quot;уникальная метка&quot;)).</p>

<h3><a name="_Toc346328187">Ошибки загрузки</a></h3>

<p class=MsoNormal>Аналогичным образом, можно искать ошибку с помощью расстановки
форм (eval-when (:<span lang=EN-US style='mso-ansi-language:EN-US'>load</span>-toplevel)
(print &quot;уникальная метка&quot;))</p>

<h2><a name="_Toc346453833"></a><a name="_Toc346328188"><span style='mso-bookmark:
_Toc346453833'>Трассировка и отладка </span></a><span style='mso-bookmark:_Toc346328188'><span
style='mso-bookmark:_Toc346453833'><span lang=EN-US style='mso-ansi-language:
EN-US'>print-</span>ами</span></span></h2>

<p class=MsoNormal>Трассировка очень удобна, т.к. она показывает параметры и
возвращающие значения любого множества функций, отображая глубину вложенности
стека отступами. Можно трассировать обычную функцию, родовую функцию или её отдельные
методы, а также <span style='color:red'>макросы</span>. Для трассировки обычной
ф-ии пишем (<span lang=EN-US style='color:red;mso-ansi-language:EN-US'>trace</span><span
lang=EN-US> </span>имя), нажимаем <span lang=EN-US style='mso-ansi-language:
EN-US'>ctrl</span>-<span lang=EN-US style='mso-ansi-language:EN-US'>alt</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>t</span><span lang=EN-US> </span>на
её имени или выбираем трассировку в контектном меню. Перекомпилировать функцию
не нужно. Можно делать<span style='mso-spacerun:yes'>  </span>трассировку с (<span
lang=EN-US style='color:red;mso-ansi-language:EN-US'>break</span>) <span
style='mso-spacerun:yes'> </span>- в этом случае исполнение прервётся при
входе. Трассировку методов можно делать через <span lang=EN-US
style='mso-ansi-language:EN-US'>Works</span>/<span lang=EN-US style='mso-ansi-language:
EN-US'>Tools</span>/<span lang=EN-US style='mso-ansi-language:EN-US'>Generic</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>function</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>browser</span>,
выбирая методы и вызывая для каждого из них контекстное меню. Для выключения
трассировки всех функций выполняем (<span lang=EN-US style='mso-ansi-language:
EN-US'>untrace</span>). Аналогичным трассировке методом является отладочная
печать. <span class=GramE><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US'>Show</span><span style='color:blue'>-</span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US'>expr</span><span lang=EN-US
style='color:blue'> </span>позволяет выводить само выражение и его значение.</span>
</p>

<h2><a name="_Toc346453834"></a><a name="_Toc346328189"><span style='mso-bookmark:
_Toc346453834'>Остановы и пошаговое исполнение</span></a></h2>

<p class=MsoNormal>Надёжным способом установки точки прерывания является
вставка в нужное место кода вызова (<span lang=EN-US style='color:red;
mso-ansi-language:EN-US'>break</span>) <span lang=EN-US style='mso-ansi-language:
EN-US'>c</span><span lang=EN-US> </span>последующей перекомпиляцией функции.
При таком способе останова нельзя из режима останова перейти в режим пошагового
исполнения. Негусто, но радуемся тому, что можно перекомпилировать по одной
функции, поэтому затраты времени на установку (<span lang=EN-US
style='mso-ansi-language:EN-US'>break</span>) невелики.<span style='mso-fareast-font-family:
"MS Mincho"'> <o:p></o:p></span></p>

<p class=MsoNormal>Теоретически, в коде можно ставить точки останова, нажав на
красную кнопку с кружком в начале формы, где хотим остановиться. Эта
возможность запускает пошаговый отладчик. Всё бы хорошо, но <span lang=EN-US
style='mso-ansi-language:EN-US'>iterate</span> и <span lang=EN-US
style='color:blue;mso-ansi-language:EN-US'>proga</span><span lang=EN-US> </span>так
меняют код, что эта возможность становится почти везде недоступной - среда не
умеет ставить точки останова в коде, подвеграющемся макрорасширению. </p>

<h2><a name="_Toc346453835"></a><a name="_Toc346328190"><span style='mso-bookmark:
_Toc346453835'><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>Assert</span></span></a><span style='mso-bookmark:
_Toc346328190'><span style='mso-bookmark:_Toc346453835'><span style='mso-fareast-font-family:
"MS Mincho"'>, </span></span></span><span style='mso-bookmark:_Toc346328190'><span
style='mso-bookmark:_Toc346453835'><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";color:blue;mso-ansi-language:EN-US'>with</span></span></span><span
style='mso-bookmark:_Toc346328190'><span style='mso-bookmark:_Toc346453835'><span
style='mso-fareast-font-family:"MS Mincho";color:blue'>-</span></span></span><span
style='mso-bookmark:_Toc346328190'><span style='mso-bookmark:_Toc346453835'><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";color:blue;mso-ansi-language:
EN-US'>the</span></span></span><span style='mso-bookmark:_Toc346328190'><span
style='mso-bookmark:_Toc346453835'><span style='mso-fareast-font-family:"MS Mincho";
color:blue'>1</span></span></span><span style='mso-fareast-font-family:"MS Mincho";
color:blue'><o:p></o:p></span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
color:red;mso-ansi-language:EN-US'>Assert</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho"'> </span><span style='mso-fareast-font-family:
"MS Mincho"'>означает то же, что в </span><st1:place w:st="on"><span
 lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>Delphi</span></st1:place><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho"'> </span><span
style='mso-fareast-font-family:"MS Mincho"'>и им нужно пользоваться как можно
более интенсивно. </span><span class=GramE><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";color:blue;mso-ansi-language:EN-US'>With</span><span
style='mso-fareast-font-family:"MS Mincho";color:blue'>-</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";color:blue;mso-ansi-language:
EN-US'>the</span><span style='mso-fareast-font-family:"MS Mincho";color:blue'>1</span><span
style='mso-fareast-font-family:"MS Mincho"'> сочетает в себе связывание
локальной переменной, декларацию типа и его проверку.</span></span><span
style='mso-fareast-font-family:"MS Mincho"'> <o:p></o:p></span></p>

<h2><a name="_Toc346453836"></a><a name="_Toc346328191"><span style='mso-bookmark:
_Toc346453836'><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US'>Unit</span></span></a><span style='mso-bookmark:_Toc346328191'><span
style='mso-bookmark:_Toc346453836'><span style='mso-fareast-font-family:"MS Mincho"'>-тестирование</span></span></span><span
style='mso-fareast-font-family:"MS Mincho"'><o:p></o:p></span></h2>

<p class=MsoNormal><span class=GramE><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US'>Unit</span><span style='mso-fareast-font-family:
"MS Mincho"'>-тестирование в лиспе не составляет затруднений благодаря его
устройству.</span></span><span style='mso-fareast-font-family:"MS Mincho"'> Автор
пользуется собственным (очень легковесным) средством определения тестов, </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";color:blue;mso-ansi-language:
EN-US'>def</span><span style='mso-fareast-font-family:"MS Mincho";color:blue'>-</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";color:blue;mso-ansi-language:
EN-US'>trivial</span><span style='mso-fareast-font-family:"MS Mincho";
color:blue'>-</span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
color:blue;mso-ansi-language:EN-US'>test</span><span style='mso-fareast-font-family:
"MS Mincho";color:blue'>::! </span><span style='mso-fareast-font-family:"MS Mincho"'>В
серьёзных системах тесты размещаются в отдельных </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>asdf</span><span
style='mso-fareast-font-family:"MS Mincho"'>-системах, но автор обычно
разрабатывает код стремительно и для экономии сил помещает тесты прямо в
исходные тексты; тесты выполняются во время загрузки. Заодно тесты служат
примерами использования кода.<o:p></o:p></span></p>

<h2><a name="_Toc346453837"></a><a name="_Toc346328192"><span style='mso-bookmark:
_Toc346453837'><span style='mso-fareast-font-family:"MS Mincho"'>Профайлер</span></span></a><span
style='mso-fareast-font-family:"MS Mincho"'><o:p></o:p></span></h2>

<p class=MsoNormal><span style='mso-fareast-font-family:"MS Mincho"'>Он есть в </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'>Lispworks</span><span
style='mso-fareast-font-family:"MS Mincho"'>.<o:p></o:p></span></p>

<h2><a name="_Toc346453838"></a><a name="_Toc346328193"><span style='mso-bookmark:
_Toc346453838'><span style='mso-fareast-font-family:"MS Mincho";color:blue;
mso-bidi-font-style:normal'>Трассировка </span></span></a><span
style='mso-bookmark:_Toc346328193'><span style='mso-bookmark:_Toc346453838'><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";color:blue;mso-ansi-language:
EN-US;mso-bidi-font-style:normal'>SQL</span></span></span><span
style='mso-bookmark:_Toc346453838'></span><span style='mso-bookmark:_Toc346328193'></span><span
style='mso-fareast-font-family:"MS Mincho";color:blue;mso-bidi-font-style:normal'><o:p></o:p></span></h2>

<p class=MsoNormal><span style='mso-fareast-font-family:"MS Mincho";color:blue;
mso-fareast-language:ZH-CN'>Для печати в консоль всех выполнямых </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";color:blue;mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>sql</span><span style='mso-fareast-font-family:
"MS Mincho";color:blue;mso-fareast-language:ZH-CN'>-запросов надо установить в </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";color:blue;mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>t</span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";color:blue;mso-fareast-language:ZH-CN'> </span><span
style='mso-fareast-font-family:"MS Mincho";color:blue;mso-fareast-language:
ZH-CN'>глобальную переменную </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";color:blue;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>*trace-firebird*.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-indent:0cm'><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<h1><a name="_Toc346453839"><span style='mso-fareast-font-family:"MS Mincho"'>Контрольные
вопросы и практические задания</span></a><span style='mso-fareast-font-family:
"MS Mincho"'><o:p></o:p></span></h1>

<p class=MsoBodyText><span style='mso-fareast-font-family:"MS Mincho";
mso-fareast-language:ZH-CN'>Для практических заданий нужно:<o:p></o:p></span></p>

<p class=MsoBodyText><span style='mso-fareast-font-family:"MS Mincho";
mso-fareast-language:ZH-CN'>- </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>Windows</span><span
style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:ZH-CN'> (в </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>XP </span><span style='mso-fareast-font-family:
"MS Mincho";mso-fareast-language:ZH-CN'>точно работает)<o:p></o:p></span></p>

<p class=MsoBodyText><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>- Lispworks 6.0 Personal Edition
</span><span style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:
ZH-CN'><o:p></o:p></span></p>

<p class=MsoBodyText><span style='mso-fareast-font-family:"MS Mincho";
mso-fareast-language:ZH-CN'>- <a
href="http://code.google.com/p/def-symbol-readmacro/"><span lang=EN-US
style='mso-ansi-language:EN-US'>http</span>://<span lang=EN-US
style='mso-ansi-language:EN-US'>code</span>.<span lang=EN-US style='mso-ansi-language:
EN-US'>google</span>.<span lang=EN-US style='mso-ansi-language:EN-US'>com</span>/<span
lang=EN-US style='mso-ansi-language:EN-US'>p</span>/<span lang=EN-US
style='mso-ansi-language:EN-US'>def</span>-<span lang=EN-US style='mso-ansi-language:
EN-US'>symbol</span>-<span lang=EN-US style='mso-ansi-language:EN-US'>readmacro</span>/</a>
(см. W</span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>iki</span><span
style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:ZH-CN'> &quot;Установка
и загрузка&quot;) <o:p></o:p></span></p>

<p class=MsoBodyText><span style='mso-fareast-font-family:"MS Mincho";
mso-fareast-language:ZH-CN'>- </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>TeamViewer</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:
ZH-CN'> </span><span style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:
ZH-CN'>для демонстраций<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:
ZH-CN'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span class=GramE><span
style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:ZH-CN'>1. </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>assert</span><span style='mso-fareast-font-family:
"MS Mincho";mso-fareast-language:ZH-CN'>, </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>trace</span><span style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:
ZH-CN'>, </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>break</span><span
style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:ZH-CN'>, макросы,
</span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>macroexpand</span><span style='mso-fareast-font-family:
"MS Mincho";mso-fareast-language:ZH-CN'>, квазицитирование, основной метод, родовая
функция, </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>call</span><span
style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:ZH-CN'>-</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>next</span><span style='mso-fareast-font-family:
"MS Mincho";mso-fareast-language:ZH-CN'>-</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>method</span><span style='mso-fareast-font-family:"MS Mincho";
mso-fareast-language:ZH-CN'>, </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>cons</span><span
style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:ZH-CN'>, </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>car</span><span style='mso-fareast-font-family:
"MS Mincho";mso-fareast-language:ZH-CN'>, </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>cdr</span><span style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:
ZH-CN'>, </span><span lang=EN-US style='mso-fareast-font-family:"MS Mincho";
mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>eq</span><span
style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:ZH-CN'>, *</span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>standard</span><span style='mso-fareast-font-family:
"MS Mincho";mso-fareast-language:ZH-CN'>-</span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>output</span><span style='mso-fareast-font-family:"MS Mincho";
mso-fareast-language:ZH-CN'>*, </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>listener</span><span
style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:ZH-CN'>, </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>lambda</span><span style='mso-fareast-font-family:
"MS Mincho";mso-fareast-language:ZH-CN'>, </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>defpackage</span><span style='mso-fareast-font-family:"MS Mincho";
mso-fareast-language:ZH-CN'>, </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>progn</span><span
style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:ZH-CN'>, </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>defmacro</span><span style='mso-fareast-font-family:
"MS Mincho";mso-fareast-language:ZH-CN'>, </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>funcall</span><span style='mso-fareast-font-family:"MS Mincho";
mso-fareast-language:ZH-CN'>, </span><span lang=EN-US style='mso-fareast-font-family:
"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>let</span><span
style='mso-fareast-font-family:"MS Mincho";mso-fareast-language:ZH-CN'>, </span><span
lang=EN-US style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;
mso-fareast-language:ZH-CN'>defparameter</span><span style='mso-fareast-font-family:
"MS Mincho";mso-fareast-language:ZH-CN'>, </span><span lang=EN-US
style='mso-fareast-font-family:"MS Mincho";mso-ansi-language:EN-US;mso-fareast-language:
ZH-CN'>defvar</span><span style='mso-fareast-font-family:"MS Mincho";
mso-fareast-language:ZH-CN'>, список, </span>переход от закрывающей к
открывающей скобке и обратно, удаление списка до или после курсора в буфер
обмена, переход на следующий/предыдущий список, <span lang=EN-US
style='mso-ansi-language:EN-US'>print</span>, <span lang=EN-US
style='mso-ansi-language:EN-US'>read</span>, символ, пакет, <span lang=EN-US
style='mso-ansi-language:EN-US'>defun</span>, <span lang=EN-US
style='mso-ansi-language:EN-US'>defgeneric</span>, <span lang=EN-US
style='mso-ansi-language:EN-US'>defmethod</span>, <span lang=EN-US
style='mso-ansi-language:EN-US'>setf</span>, <span lang=EN-US style='mso-ansi-language:
EN-US'>cond</span>, <span lang=EN-US style='mso-ansi-language:EN-US'>defstruct</span>,
<span lang=EN-US style='mso-ansi-language:EN-US'>defclass</span></span>, <span
class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>coerce</span></span>,
<span lang=EN-US style='mso-ansi-language:EN-US'>prin</span>1-<span lang=EN-US
style='mso-ansi-language:EN-US'>to</span>-<span lang=EN-US style='mso-ansi-language:
EN-US'>string</span>, <span lang=EN-US style='mso-ansi-language:EN-US'>read</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>from</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>string</span>, <span lang=EN-US
style='mso-ansi-language:EN-US'>parse</span>-<span lang=EN-US style='mso-ansi-language:
EN-US'>integer</span>, <span lang=EN-US style='mso-ansi-language:EN-US'>string</span>,
<span lang=EN-US style='mso-ansi-language:EN-US'>format</span> - знать
определения всех понятий и зачем это нужно. Про каждое понятие указать 1-2 источника,
где оно описано (письменно). </p>

<p class=MsoNormal><span style='color:red'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'>2. Каким типом обозначается
&quot;любой объект&quot;. </p>

<p class=MsoNormal style='text-indent:0cm'>3. Создать <span lang=EN-US
style='mso-ansi-language:EN-US'>asdf</span>-систему <span lang=EN-US
style='mso-ansi-language:EN-US'>test</span>3, с пакетом<span class=GramE> :</span><span
lang=EN-US style='mso-ansi-language:EN-US'>test</span>3, включающую файл <span
lang=EN-US style='mso-ansi-language:EN-US'>test</span>3.<span lang=EN-US
style='mso-ansi-language:EN-US'>lisp</span> со следующими функциями</p>

<p class=MsoNormal style='text-indent:0cm'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='mso-ansi-language:
EN-US'>(<span class=GramE>defun</span> f1 (x) <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='mso-ansi-language:
EN-US'><span style='mso-spacerun:yes'>   </span>(+ <span class=GramE>x</span>
1))<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='mso-ansi-language:
EN-US'>(<span class=GramE>defun</span> f2 (y)<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='mso-ansi-language:
EN-US'><span style='mso-spacerun:yes'>   </span>(+ 4 (f1 &quot;4&quot;)))</span></p>

<p class=MsoNormal style='text-indent:0cm'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='text-indent:0cm'>функция <span lang=EN-US
style='mso-ansi-language:EN-US'>f</span>2 должна быть экспортируемой. </p>

<p class=MsoNormal style='text-indent:0cm'>Вызвать функцию <span lang=EN-US
style='mso-ansi-language:EN-US'>f</span>2 с параметром 5 из <span lang=EN-US
style='mso-ansi-language:EN-US'>Listener</span>. <span
style='mso-spacerun:yes'> </span></p>

<p class=MsoNormal style='text-indent:0cm'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='text-indent:0cm'>Продемонстрировать локализацию
ошибки с помощью жука<span class=GramE>.</span> Объяснить, почему она
произошла. <span lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='mso-ansi-language:
EN-US'>4. </span>Загрузить<span style='mso-ansi-language:EN-US'> <span
lang=EN-US>swank (SLIME). </span></span>Используя функцию <span lang=EN-US
style='mso-ansi-language:EN-US'>swank</span>-<span lang=EN-US style='mso-ansi-language:
EN-US'>backend</span>::<span lang=EN-US style='mso-ansi-language:EN-US'>generic</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>function</span>-<span lang=EN-US
style='mso-ansi-language:EN-US'>p</span>, вывести список всех методов всех родовых
функций, определённых в системе в виде именованных функций. Каждый метод должен
входить в список один раз. Использовать<span style='mso-ansi-language:EN-US'> <span
lang=EN-US>list-all-packages, do-symbols, fboundp, symbol-function,
remove-duplicates. </span></span></p>

<p class=MsoNormal style='text-indent:0cm'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='text-indent:0cm'>5. С помощью инспектора просмотреть
родовую функцию <span lang=EN-US style='mso-ansi-language:EN-US'>print</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>object</span>. Просмотреть любой
метод и его ассемблерный листинг (продемонстрировать). Попытаться написать
функцию, возвращающую по методу его ассемблерный листинг. См. <span lang=EN-US
style='mso-ansi-language:EN-US'>disassemble</span>, <span lang=EN-US
style='mso-ansi-language:EN-US'>find</span>-<span lang=EN-US style='mso-ansi-language:
EN-US'>method</span>, <span lang=EN-US style='mso-ansi-language:EN-US'>slot</span>-<span
lang=EN-US style='mso-ansi-language:EN-US'>value</span>. Может не получиться<span
class=GramE>,п</span>оэтому не тратьте на это задание более 4 часов. В любом
случае, должен получиться какой-то промежуточный результат и его нужно
представить в качестве результата выполнения задания. </p>

<p class=MsoNormal style='text-indent:0cm'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='mso-ansi-language:
EN-US'>6. </span>Трассировать<span style='mso-ansi-language:EN-US'> </span>функцию<span
style='mso-ansi-language:EN-US'> <span lang=EN-US>lispworks-tools:<span
class=GramE>:directory</span>-search-internal-search </span></span>с<span
style='mso-ansi-language:EN-US'> </span>прерыванием<span lang=EN-US
style='mso-ansi-language:EN-US'> (trace with break). <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'>Вызвать средство поиска в файлах,
задать способ поиска &quot;<span lang=EN-US style='mso-ansi-language:EN-US'>Root</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>and</span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>Patterns</span>&quot;
и посмотреть, как работает эта функция.</p>

<p class=MsoNormal style='text-indent:0cm'>С помощью <span lang=EN-US
style='color:blue;mso-ansi-language:EN-US'>decorate</span><span
style='color:blue'>-</span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US'>function</span><span style='color:blue'>::</span><span lang=EN-US
style='color:blue;mso-ansi-language:EN-US'>decorate</span><span
style='color:blue'>-</span><span lang=EN-US style='color:blue;mso-ansi-language:
EN-US'>function</span><span lang=EN-US> </span>попробовать подставить свой
список каталогов вместо <span class=GramE>введённого</span> пользователем. </p>

<p class=MsoNormal style='text-indent:0cm'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='text-indent:0cm'>7. а) Переделать пример из главы <span
lang=EN-US style='mso-ansi-language:EN-US'>Overload</span>, чтобы поиск был <span
style='mso-fareast-language:ZH-CN'>с учётом регистра букв. <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span style='mso-fareast-language:
ZH-CN'><span style='mso-spacerun:yes'>  </span><span
style='mso-spacerun:yes'> </span><span style='mso-spacerun:yes'> </span>б) то
же самое, но без учёта регистра букв не только латиницы, но и кириллицы
(использовать <span style='color:blue'>russian-budden-tools::char-equal-cyr</span>)</span><span
lang=EN-US style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span style='mso-fareast-language:
ZH-CN'>8. Написать функцию, которая от суммы первого, третьего, ... параметров
вычитает сумму второго, четвёртого, ... <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span style='mso-fareast-language:
ZH-CN'>С использованием &amp;</span><span lang=EN-US style='mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN'>rest</span><span style='mso-fareast-language:
ZH-CN'>. ВНимание! Никакая функция с &amp;</span><span lang=EN-US
style='mso-ansi-language:EN-US;mso-fareast-language:ZH-CN'>rest</span><span
lang=EN-US style='mso-fareast-language:ZH-CN'> </span><span style='mso-fareast-language:
ZH-CN'>не должна разрушать свой список параметров - это приводить к
непредсказуемым последствиям. <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span style='mso-fareast-language:
ZH-CN'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><span style='mso-fareast-language:
ZH-CN'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:0cm'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='text-indent:0cm'><o:p>&nbsp;</o:p></p>

</div>

</body>

</html>
